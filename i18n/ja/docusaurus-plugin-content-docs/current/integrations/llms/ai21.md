---
sidebar_label: AI21 Labs
translated: true
---

# AI21LLM

このサンプルでは、`AI21`モデルとやり取りするためのLangChainの使用方法を説明します。

## インストール

```python
!pip install -qU langchain-ai21
```

## 環境設定

[AI21 API key](https://docs.ai21.com/)を取得し、`AI21_API_KEY`環境変数を設定する必要があります:

```python
import os
from getpass import getpass

os.environ["AI21_API_KEY"] = getpass()
```

## 使用方法

```python
from langchain_ai21 import AI21LLM
from langchain_core.prompts import PromptTemplate

template = """Question: {question}

Answer: Let's think step by step."""

prompt = PromptTemplate.from_template(template)

model = AI21LLM(model="j2-ultra")

chain = prompt | model

chain.invoke({"question": "What is LangChain?"})
```

```output
'\nLangChain is a (database)\nLangChain is a database for storing and processing documents'
```

# AI21 コンテキスト回答

AI21のコンテキスト回答モデルを使用すると、テキストやドキュメントをコンテキストとして受け取り、質問に基づいて回答を返すことができます。

つまり、質問の答えがドキュメントにない場合、モデルはそれを示します(誤った答えを提供するのではなく)。

```python
from langchain_ai21 import AI21ContextualAnswers

tsm = AI21ContextualAnswers()

response = tsm.invoke(input={"context": "Your context", "question": "Your question"})
```

チェーンやアウトプットパーサー、ベクトルDBとも併せて使用できます。

```python
from langchain_ai21 import AI21ContextualAnswers
from langchain_core.output_parsers import StrOutputParser

tsm = AI21ContextualAnswers()
chain = tsm | StrOutputParser()

response = chain.invoke(
    {"context": "Your context", "question": "Your question"},
)
```
