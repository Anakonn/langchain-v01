---
translated: true
---

# LLM Sherpa

このノートブックでは、`LLM Sherpa`を使ってさまざまな種類のファイルを読み込む方法について説明します。`LLM Sherpa`は、DOCX、PPTX、HTML、TXT、XMLなどさまざまなファイル形式をサポートしています。

`LLMSherpaFileLoader`は、LLMSherpaライブラリの一部であるLayoutPDFReaderを使用します。このツールは、ほとんどのPDFテキストパーサーでは失われがちなレイアウト情報を保持しながらPDFを解析するように設計されています。

LayoutPDFReaderの主な機能は以下の通りです:

* セクションとサブセクションのレベルを識別して抽出できます。
* 行を結合してパラグラフを作成できます。
* セクションとパラグラフの間のリンクを識別できます。
* テーブルを抽出し、見つかったセクションも抽出できます。
* リストと入れ子になったリストを識別して抽出できます。
* ページにまたがるコンテンツを結合できます。
* 繰り返しのヘッダーとフッターを削除できます。
* 透かしを削除できます。

[llmsherpa](https://llmsherpa.readthedocs.io/en/latest/)のドキュメントを確認してください。

`INFO: このライブラリは一部のPDFファイルで失敗する可能性があるので、注意して使用してください。`

```python
# Install package
# !pip install --upgrade --quiet llmsherpa
```

## LLMSherpaFileLoader

LLMSherpaFileLoaderの内部では、ファイルコンテンツを読み込むためのいくつかの戦略が定義されています: ["sections", "chunks", "html", "text"]。[nlm-ingestor](https://github.com/nlmatics/nlm-ingestor)をセットアップして`llmsherpa_api_url`を取得するか、デフォルトを使用します。

### sections戦略: ファイルをセクションに分割して返す

```python
from langchain_community.document_loaders.llmsherpa import LLMSherpaFileLoader

loader = LLMSherpaFileLoader(
    file_path="https://arxiv.org/pdf/2402.14207.pdf",
    new_indent_parser=True,
    apply_ocr=True,
    strategy="sections",
    llmsherpa_api_url="http://localhost:5010/api/parseDocument?renderFormat=all",
)
docs = loader.load()
```

```python
docs[1]
```

```output
Document(page_content='Abstract\nWe study how to apply large language models to write grounded and organized long-form articles from scratch, with comparable breadth and depth to Wikipedia pages.\nThis underexplored problem poses new challenges at the pre-writing stage, including how to research the topic and prepare an outline prior to writing.\nWe propose STORM, a writing system for the Synthesis of Topic Outlines through\nReferences\nFull-length Article\nTopic\nOutline\n2022 Winter Olympics\nOpening Ceremony\nResearch via Question Asking\nRetrieval and Multi-perspective Question Asking.\nSTORM models the pre-writing stage by\nLLM\n(1) discovering diverse perspectives in researching the given topic, (2) simulating conversations where writers carrying different perspectives pose questions to a topic expert grounded on trusted Internet sources, (3) curating the collected information to create an outline.\nFor evaluation, we curate FreshWiki, a dataset of recent high-quality Wikipedia articles, and formulate outline assessments to evaluate the pre-writing stage.\nWe further gather feedback from experienced Wikipedia editors.\nCompared to articles generated by an outlinedriven retrieval-augmented baseline, more of STORM’s articles are deemed to be organized (by a 25% absolute increase) and broad in coverage (by 10%).\nThe expert feedback also helps identify new challenges for generating grounded long articles, such as source bias transfer and over-association of unrelated facts.\n1. Can you provide any information about the transportation arrangements for the opening ceremony?\nLLM\n2. Can you provide any information about the budget for the 2022 Winter Olympics opening ceremony?…\nLLM- Role1\nLLM- Role2\nLLM- Role1', metadata={'source': 'https://arxiv.org/pdf/2402.14207.pdf', 'section_number': 1, 'section_title': 'Abstract'})
```

```python
len(docs)
```

```output
79
```

### chunks戦略: ファイルをチャンクに分割して返す

```python
from langchain_community.document_loaders.llmsherpa import LLMSherpaFileLoader

loader = LLMSherpaFileLoader(
    file_path="https://arxiv.org/pdf/2402.14207.pdf",
    new_indent_parser=True,
    apply_ocr=True,
    strategy="chunks",
    llmsherpa_api_url="http://localhost:5010/api/parseDocument?renderFormat=all",
)
docs = loader.load()
```

```python
docs[1]
```

```output
Document(page_content='Assisting in Writing Wikipedia-like Articles From Scratch with Large Language Models\nStanford University {shaoyj, yuchengj, tkanell, peterxu, okhattab}@stanford.edu lam@cs.stanford.edu', metadata={'source': 'https://arxiv.org/pdf/2402.14207.pdf', 'chunk_number': 1, 'chunk_type': 'para'})
```

```python
len(docs)
```

```output
306
```

### html戦略: ファイルを1つのHTMLドキュメントとして返す

```python
from langchain_community.document_loaders.llmsherpa import LLMSherpaFileLoader

loader = LLMSherpaFileLoader(
    file_path="https://arxiv.org/pdf/2402.14207.pdf",
    new_indent_parser=True,
    apply_ocr=True,
    strategy="html",
    llmsherpa_api_url="http://localhost:5010/api/parseDocument?renderFormat=all",
)
docs = loader.load()
```

```python
docs[0].page_content[:400]
```

```output
'<html><h1>Assisting in Writing Wikipedia-like Articles From Scratch with Large Language Models</h1><table><th><td colSpan=1>Yijia Shao</td><td colSpan=1>Yucheng Jiang</td><td colSpan=1>Theodore A. Kanell</td><td colSpan=1>Peter Xu</td></th><tr><td colSpan=1></td><td colSpan=1>Omar Khattab</td><td colSpan=1>Monica S. Lam</td><td colSpan=1></td></tr></table><p>Stanford University {shaoyj, yuchengj, '
```

```python
len(docs)
```

```output
1
```

### text戦略: ファイルを1つのテキストドキュメントとして返す

```python
from langchain_community.document_loaders.llmsherpa import LLMSherpaFileLoader

loader = LLMSherpaFileLoader(
    file_path="https://arxiv.org/pdf/2402.14207.pdf",
    new_indent_parser=True,
    apply_ocr=True,
    strategy="text",
    llmsherpa_api_url="http://localhost:5010/api/parseDocument?renderFormat=all",
)
docs = loader.load()
```

```python
docs[0].page_content[:400]
```

```output
'Assisting in Writing Wikipedia-like Articles From Scratch with Large Language Models\n | Yijia Shao | Yucheng Jiang | Theodore A. Kanell | Peter Xu\n | --- | --- | --- | ---\n |  | Omar Khattab | Monica S. Lam | \n\nStanford University {shaoyj, yuchengj, tkanell, peterxu, okhattab}@stanford.edu lam@cs.stanford.edu\nAbstract\nWe study how to apply large language models to write grounded and organized long'
```

```python
len(docs)
```

```output
1
```
