---
translated: true
---

# äºˆæ¸¬ã‚¬ãƒ¼ãƒ‰

ã“ã®ãƒšãƒ¼ã‚¸ã§ã¯ã€LangChainã®ä¸­ã®äºˆæ¸¬ã‚¬ãƒ¼ãƒ‰ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã®ä½¿ç”¨æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã€ãã—ã¦ç‰¹å®šã®äºˆæ¸¬ã‚¬ãƒ¼ãƒ‰ãƒ©ãƒƒãƒ‘ãƒ¼ã¸ã®å‚ç…§ã®2ã¤ã®éƒ¨åˆ†ã«åˆ†ã‹ã‚Œã¦ã„ã¾ã™ã€‚

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

- `pip install predictionguard`ã§PythonSDKã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™
- äºˆæ¸¬ã‚¬ãƒ¼ãƒ‰ã®ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—ã—([ã“ã“](https://docs.predictionguard.com/))ã§èª¬æ˜)ã€ç’°å¢ƒå¤‰æ•°(`PREDICTIONGUARD_TOKEN`)ã«è¨­å®šã—ã¾ã™

## LLMãƒ©ãƒƒãƒ‘ãƒ¼

äºˆæ¸¬ã‚¬ãƒ¼ãƒ‰ã®LLMãƒ©ãƒƒãƒ‘ãƒ¼ãŒå­˜åœ¨ã—ã€ã“ã‚Œã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™:

```python
<!--IMPORTS:[{"imported": "PredictionGuard", "source": "langchain_community.llms", "docs": "https://api.python.langchain.com/en/latest/llms/langchain_community.llms.predictionguard.PredictionGuard.html", "title": "Prediction Guard"}]-->
from langchain_community.llms import PredictionGuard
```

åˆæœŸåŒ–æ™‚ã«ã€äºˆæ¸¬ã‚¬ãƒ¼ãƒ‰ã®ãƒ¢ãƒ‡ãƒ«åã‚’å¼•æ•°ã¨ã—ã¦æŒ‡å®šã§ãã¾ã™:

```python
pgllm = PredictionGuard(model="MPT-7B-Instruct")
```

ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç›´æ¥å¼•æ•°ã¨ã—ã¦æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™:

```python
pgllm = PredictionGuard(model="MPT-7B-Instruct", token="<your access token>")
```

æœ€å¾Œã«ã€LLMã®å‡ºåŠ›ã‚’æ§‹é€ åŒ–/åˆ¶å¾¡ã™ã‚‹ãŸã‚ã®"output"å¼•æ•°ã‚’æŒ‡å®šã§ãã¾ã™:

```python
pgllm = PredictionGuard(model="MPT-7B-Instruct", output={"type": "boolean"})
```

## ä½¿ç”¨ä¾‹

åˆ¶å¾¡ã¾ãŸã¯ä¿è­·ã•ã‚ŒãŸLLMãƒ©ãƒƒãƒ‘ãƒ¼ã®åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•:

```python
<!--IMPORTS:[{"imported": "PredictionGuard", "source": "langchain_community.llms", "docs": "https://api.python.langchain.com/en/latest/llms/langchain_community.llms.predictionguard.PredictionGuard.html", "title": "Prediction Guard"}, {"imported": "PromptTemplate", "source": "langchain_core.prompts", "docs": "https://api.python.langchain.com/en/latest/prompts/langchain_core.prompts.prompt.PromptTemplate.html", "title": "Prediction Guard"}, {"imported": "LLMChain", "source": "langchain.chains", "docs": "https://api.python.langchain.com/en/latest/chains/langchain.chains.llm.LLMChain.html", "title": "Prediction Guard"}]-->
import os

import predictionguard as pg
from langchain_community.llms import PredictionGuard
from langchain_core.prompts import PromptTemplate
from langchain.chains import LLMChain

# Your Prediction Guard API key. Get one at predictionguard.com
os.environ["PREDICTIONGUARD_TOKEN"] = "<your Prediction Guard access token>"

# Define a prompt template
template = """Respond to the following query based on the context.

Context: EVERY comment, DM + email suggestion has led us to this EXCITING announcement! ğŸ‰ We have officially added TWO new candle subscription box options! ğŸ“¦
Exclusive Candle Box - $80
Monthly Candle Box - $45 (NEW!)
Scent of The Month Box - $28 (NEW!)
Head to stories to get ALL the deets on each box! ğŸ‘† BONUS: Save 50% on your first box with code 50OFF! ğŸ‰

Query: {query}

Result: """
prompt = PromptTemplate.from_template(template)

# With "guarding" or controlling the output of the LLM. See the
# Prediction Guard docs (https://docs.predictionguard.com) to learn how to
# control the output with integer, float, boolean, JSON, and other types and
# structures.
pgllm = PredictionGuard(model="MPT-7B-Instruct",
                        output={
                                "type": "categorical",
                                "categories": [
                                    "product announcement",
                                    "apology",
                                    "relational"
                                    ]
                                })
pgllm(prompt.format(query="What kind of post is this?"))
```

äºˆæ¸¬ã‚¬ãƒ¼ãƒ‰ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’ä½¿ã£ãŸLLMãƒã‚§ãƒ¼ãƒ³ã®åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•:

```python
<!--IMPORTS:[{"imported": "PromptTemplate", "source": "langchain_core.prompts", "docs": "https://api.python.langchain.com/en/latest/prompts/langchain_core.prompts.prompt.PromptTemplate.html", "title": "Prediction Guard"}, {"imported": "LLMChain", "source": "langchain.chains", "docs": "https://api.python.langchain.com/en/latest/chains/langchain.chains.llm.LLMChain.html", "title": "Prediction Guard"}, {"imported": "PredictionGuard", "source": "langchain_community.llms", "docs": "https://api.python.langchain.com/en/latest/llms/langchain_community.llms.predictionguard.PredictionGuard.html", "title": "Prediction Guard"}]-->
import os

from langchain_core.prompts import PromptTemplate
from langchain.chains import LLMChain
from langchain_community.llms import PredictionGuard

# Optional, add your OpenAI API Key. This is optional, as Prediction Guard allows
# you to access all the latest open access models (see https://docs.predictionguard.com)
os.environ["OPENAI_API_KEY"] = "<your OpenAI api key>"

# Your Prediction Guard API key. Get one at predictionguard.com
os.environ["PREDICTIONGUARD_TOKEN"] = "<your Prediction Guard access token>"

pgllm = PredictionGuard(model="OpenAI-gpt-3.5-turbo-instruct")

template = """Question: {question}

Answer: Let's think step by step."""
prompt = PromptTemplate.from_template(template)
llm_chain = LLMChain(prompt=prompt, llm=pgllm, verbose=True)

question = "What NFL team won the Super Bowl in the year Justin Beiber was born?"

llm_chain.predict(question=question)
```
