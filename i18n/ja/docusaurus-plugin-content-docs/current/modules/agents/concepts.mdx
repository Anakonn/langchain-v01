---
sidebar_position: 1
translated: true
---

# 概念

エージェントの核となるアイデアは、言語モデルを使ってアクションの順序を選択することです。
チェーンでは、アクションの順序がコード内で決められています。
エージェントでは、言語モデルが推論エンジンとして使われ、どのアクションを取り、どの順序で行うかを決めます。

ここには重要な要素がいくつかあります:

## スキーマ

LangChainには、エージェントを簡単に扱えるようにするための抽象化がいくつかあります。

### AgentAction

これは、エージェントが実行すべきアクションを表すデータクラスです。
`tool`プロパティ(呼び出すべきツールの名前)と`tool_input`プロパティ(そのツールへの入力)を持っています。

### AgentFinish

これは、エージェントが最終的な結果を返す際に表されるものです。
`return_values`キーバリューマッピングを含み、これには最終的なエージェントの出力が含まれています。
通常、これには`output`キーが含まれ、それがエージェントの応答を表す文字列になっています。

### 中間ステップ

これらは、前回のエージェントアクションとその出力を表します。
これらは、次の反復で使うために渡す必要があります。
これは`List[Tuple[AgentAction, Any]]`型で表されます。
observationは柔軟性を持たせるため、現在は`Any`型になっています。
実際には、多くの場合、これは文字列になります。

## エージェント

これは、次に何をするべきかを決めるチェーンです。
通常、言語モデル、プロンプト、出力パーサーによって動作します。

さまざまなエージェントには、推論のためのプロンプトスタイル、入力のエンコーディング方法、出力の解析方法が異なります。
組み込みのエージェントの一覧は[agent types](/docs/modules/agents/agent_types/)を参照してください。
必要に応じて**カスタムエージェントを簡単に構築**することもできます。

### エージェントの入力

エージェントの入力はキーバリューマッピングです。
必須のキーは`intermediate_steps`のみで、これは上述の`Intermediate Steps`に対応します。

通常、PromptTemplateが、これらのペアをLLMに最適な形式に変換します。

### エージェントの出力

出力は、次に取るアクション(`AgentAction`)または最終的な応答(`AgentFinish`)です。
具体的には、`Union[AgentAction, List[AgentAction], AgentFinish]`型になります。

出力パーサーは、生のLLM出力をこれらの3つのタイプの1つに変換する責任があります。

## AgentExecutor

エージェントエグゼキューターは、エージェントの実行時間です。
これが実際にエージェントを呼び出し、エージェントが選択したアクションを実行し、アクションの出力をエージェントに返し、繰り返します。
擬似コードでは、大まかに以下のようになります。

```python
next_action = agent.get_action(...)
while next_action != AgentFinish:
    observation = run(next_action)
    next_action = agent.get_action(..., next_action, observation)
return next_action
```

これは単純に見えますが、このランタイムが処理する複雑性がいくつかあります。
1. エージェントが存在しないツールを選択した場合の処理
2. ツールがエラーを返した場合の処理
3. エージェントが、ツールの呼び出しに解析できない出力を生成した場合の処理
4. エージェントの決定、ツールの呼び出しなど、あらゆるレベルでのログ記録と可視化(stdout、[LangSmith](/docs/langsmith)など)

## ツール

ツールとは、エージェントが呼び出すことができる関数です。
`Tool`抽象化には2つのコンポーネントがあります:

1. ツールの入力スキーマ。これにより、LLMがツールを呼び出すためのパラメーターを知ることができます。これがなければ、正しい入力がわかりません。これらのパラメーターは適切な名前と説明を持つべきです。
2. 実行する関数。これは通常、呼び出されるPythonの関数です。

### 考慮事項

ツールに関して2つの重要な設計上の考慮事項があります:

1. エージェントに正しいツールへのアクセスを与えること
2. エージェントにとって最も役立つようにツールを説明すること

これらの両方を考慮しないと、機能するエージェントを構築することはできません。
エージェントに正しいツールセットを与えないと、与えられた目的を達成することはできません。
ツールを適切に説明しないと、エージェントはそれらを正しく使うことができません。

LangChainは多くの組み込みツールを提供していますが、独自のツールを定義するのも簡単です(カスタムの説明を含む)。
組み込みツールの一覧は[tools integrations section](/docs/integrations/tools/)を参照してください。

## ツールキット

多くの一般的なタスクでは、エージェントが関連するツールのセットを必要とします。
このためLangChainでは、ツールキットという概念を提供しています - 特定の目的を達成するために必要な3〜5個のツールのグループです。
たとえば、GitHubツールキットには、GitHubのissueを検索するツール、ファイルを読むツール、コメントするツールなどが含まれています。

LangChainは多くの組み込みツールキットを提供しています。
組み込みツールキットの一覧は[toolkits integrations section](/docs/integrations/toolkits/)を参照してください。
