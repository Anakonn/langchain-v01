---
translated: true
---

# Contribuir con c贸digo

Para contribuir a este proyecto, sigue el flujo de trabajo ["fork y pull request"](https://docs.github.com/en/get-started/quickstart/contributing-to-projects).
Por favor, no intentes empujar directamente a este repositorio a menos que seas un mantenedor.

Por favor, sigue la plantilla de solicitud de extracci贸n registrada al abrir solicitudes de extracci贸n. Anota los problemas relacionados y etiqueta a los mantenedores relevantes.

Las solicitudes de extracci贸n no pueden aterrizar sin pasar primero los controles de formato, linting y pruebas. Consulta [Pruebas](#pruebas) y [Formato y Linting](#formato-y-linting) para saber c贸mo ejecutar estas comprobaciones localmente.

Es esencial que mantengamos una gran documentaci贸n y pruebas. Si:
- Corriges un error
  - Agrega una prueba de unidad o integraci贸n relevante cuando sea posible. Estas se encuentran en `tests/unit_tests` y `tests/integration_tests`.
- Haces una mejora
  - Actualiza los cuadernos de ejemplo y la documentaci贸n afectados. Estos se encuentran en `docs`.
  - Actualiza las pruebas de unidad e integraci贸n cuando sea relevante.
- Agregas una funci贸n
  - Agrega un cuaderno de demostraci贸n en `docs/docs/`.
  - Agrega pruebas de unidad e integraci贸n.

Somos un equipo peque帽o y orientado al progreso. Si hay algo que te gustar铆a agregar o cambiar, abrir una solicitud de extracci贸n es la mejor manera de llamar nuestra atenci贸n.

##  Inicio r谩pido

Esta gu铆a de inicio r谩pido explica c贸mo ejecutar el repositorio localmente.
Para un [contenedor de desarrollo](https://containers.dev/), consulta la [carpeta .devcontainer](https://github.com/langchain-ai/langchain/tree/master/.devcontainer).

### Gesti贸n de dependencias: Poetry y otros administradores de entornos/dependencias

Este proyecto utiliza [Poetry](https://python-poetry.org/) v1.7.1+ como gestor de dependencias.

Nota: *Antes de instalar Poetry*, si usas `Conda`, crea y activa un nuevo entorno Conda (por ejemplo, `conda create -n langchain python=3.9`)

Instala Poetry: **[documentaci贸n sobre c贸mo instalarlo](https://python-poetry.org/docs/#installation)**.

Nota: Si usas `Conda` o `Pyenv` como tu gestor de entornos/paquetes, despu茅s de instalar Poetry,
dile a Poetry que use el entorno virtual de Python (`poetry config virtualenvs.prefer-active-python true`)

### Diferentes paquetes

Este repositorio contiene varios paquetes:
- `langchain-core`: Interfaces base para las principales abstracciones, as铆 como l贸gica para combinarlas en cadenas (Lenguaje de Expresi贸n LangChain).
- `langchain-community`: Integraciones de terceros de varios componentes.
- `langchain`: Cadenas, agentes y l贸gica de recuperaci贸n que conforman la arquitectura cognitiva de tus aplicaciones.
- `langchain-experimental`: Componentes y cadenas que son experimentales, ya sea en el sentido de que las t茅cnicas son novedosas y a煤n se est谩n probando, o requieren dar al LLM m谩s acceso del que ser铆a posible en la mayor铆a de los sistemas de producci贸n.
- Integraciones de socios: Paquetes de socios en `libs/partners` que se controlan de forma independiente.

Cada uno de estos tiene su propio entorno de desarrollo. La documentaci贸n se ejecuta desde el archivo makefile de nivel superior, pero el desarrollo se divide en flujos de prueba y lanzamiento separados.

Para este inicio r谩pido, comienza con langchain-community:

```bash
cd libs/community
```

### Dependencias de desarrollo local

Instala los requisitos de desarrollo de langchain-community (para ejecutar langchain, ejecutar ejemplos, linting, formato, pruebas y cobertura):

```bash
poetry install --with lint,typing,test,test_integration
```

Luego verifica la instalaci贸n de las dependencias:

```bash
make test
```

Si durante la instalaci贸n recibes un `WheelFileValidationError` para `debugpy`, aseg煤rate de estar ejecutando
Poetry v1.6.1+. Este error estaba presente en versiones anteriores de Poetry (por ejemplo, 1.4.1) y se ha resuelto en versiones m谩s recientes.
Si a煤n ves este error en v1.6.1+, tambi茅n puedes intentar deshabilitar la "instalaci贸n moderna"
(`poetry config installer.modern-installation false`) y volver a instalar los requisitos.
Consulta [este problema de `debugpy`](https://github.com/microsoft/debugpy/issues/1246) para m谩s detalles.

### Pruebas

_En `langchain`, `langchain-community` y `langchain-experimental`, algunas dependencias de prueba son opcionales; consulta la secci贸n sobre dependencias opcionales_.

Las pruebas unitarias cubren la l贸gica modular que no requiere llamadas a APIs externas.
Si agregas nueva l贸gica, agrega una prueba unitaria.

Para ejecutar las pruebas unitarias:

```bash
make test
```

Para ejecutar las pruebas unitarias en Docker:

```bash
make docker_tests
```

Tambi茅n hay [pruebas de integraci贸n y cobertura de c贸digo](/docs/contributing/testing/) disponibles.

### Solo desarrollar langchain_core o langchain_experimental

Si solo est谩s desarrollando `langchain_core` o `langchain_experimental`, puedes simplemente instalar las dependencias de los proyectos respectivos y ejecutar las pruebas:

```bash
cd libs/core
poetry install --with test
make test
```

O:

```bash
cd libs/experimental
poetry install --with test
make test
```

### Formato y Linting

Ejecuta estos localmente antes de enviar un PR; el sistema de CI tambi茅n los revisar谩.

#### Formato de c贸digo

El formato de este proyecto se realiza a trav茅s de [ruff](https://docs.astral.sh/ruff/rules/).

Para ejecutar el formato para la documentaci贸n, el libro de cocina y las plantillas:

```bash
make format
```

Para ejecutar el formato de una biblioteca, ejecuta el mismo comando desde el directorio de la biblioteca correspondiente:

```bash
cd libs/{LIBRARY}
make format
```

Adem谩s, puedes ejecutar el formateador solo en los archivos que se han modificado en tu rama actual en comparaci贸n con la rama maestra usando el comando format_diff:

```bash
make format_diff
```

Esto es especialmente 煤til cuando has realizado cambios en un subconjunto del proyecto y quieres asegurarte de que tus cambios est茅n correctamente formateados sin afectar el resto del c贸digo base.

#### Linting

El linting para este proyecto se realiza mediante una combinaci贸n de [ruff](https://docs.astral.sh/ruff/rules/) y [mypy](http://mypy-lang.org/).

Para ejecutar el linting para la documentaci贸n, el libro de recetas y las plantillas:

```bash
make lint
```

Para ejecutar el linting para una biblioteca, ejecute el mismo comando desde el directorio de la biblioteca correspondiente:

```bash
cd libs/{LIBRARY}
make lint
```

Adem谩s, puede ejecutar el linter solo en los archivos que se han modificado en su rama actual en comparaci贸n con la rama principal utilizando el comando lint_diff:

```bash
make lint_diff
```

Esto puede ser muy 煤til cuando has realizado cambios solo en ciertas partes del proyecto y quieres asegurarte de que tus cambios cumplan con los est谩ndares de linting sin tener que revisar todo el c贸digo base.

Reconocemos que el linting puede ser molesto; si no quieres hacerlo, comun铆cate con un mantenedor del proyecto y ellos podr谩n ayudarte. No queremos que esto sea un obst谩culo para que se contribuya con buen c贸digo.

#### Revisi贸n ortogr谩fica

La revisi贸n ortogr谩fica para este proyecto se realiza a trav茅s de [codespell](https://github.com/codespell-project/codespell).
Tenga en cuenta que `codespell` encuentra errores ortogr谩ficos comunes, por lo que podr铆a tener falsos positivos (palabras correctamente escritas pero poco utilizadas) y falsos negativos (no encontrar palabras mal escritas).

Para revisar la ortograf铆a de este proyecto:

```bash
make spell_check
```

Para corregir la ortograf铆a en su lugar:

```bash
make spell_fix
```

Si codespell est谩 marcando incorrectamente una palabra, puede omitir la revisi贸n ortogr谩fica para esa palabra agreg谩ndola a la configuraci贸n de codespell en el archivo `pyproject.toml`.

```python
[tool.codespell]
...
# Add here:
ignore-words-list = 'momento,collison,ned,foor,reworkd,parth,whats,aapply,mysogyny,unsecure'
```

## Trabajar con dependencias opcionales

`langchain`, `langchain-community` y `langchain-experimental` dependen de dependencias opcionales para mantener estos paquetes ligeros.

`langchain-core` y los paquetes asociados **no utilizan** dependencias opcionales de esta manera.

Solo necesitas agregar una nueva dependencia si una **prueba unitaria** depende del paquete.
Si tu paquete solo se requiere para **pruebas de integraci贸n**, entonces puedes omitir estos
pasos y dejar todos los archivos pyproject.toml y poetry.lock tal como est谩n.

Si est谩s agregando una nueva dependencia a Langchain, asume que ser谩 una dependencia opcional, y
que la mayor铆a de los usuarios no la tendr谩n instalada.

Los usuarios que no tengan la dependencia instalada deber铆an poder **importar** tu c贸digo sin
ning煤n efecto secundario (sin advertencias, sin errores, sin excepciones).

Para introducir la dependencia al archivo pyproject.toml correctamente, por favor haz lo siguiente:

1. Agrega la dependencia al grupo principal como una dependencia opcional
  ```bash
  poetry add --optional [nombre_del_paquete]
  ```
2. Abre el archivo pyproject.toml y agrega la dependencia al extra `extended_testing`
3. Vuelve a bloquear el archivo poetry para actualizar el extra.
  ```bash
  poetry lock --no-update
  ```
4. Agrega una prueba unitaria que al menos intente importar el nuevo c贸digo. Idealmente, la prueba
unitaria utiliza fixtures ligeros para probar la l贸gica del c贸digo.
5. Por favor, usa el decorador `@pytest.mark.requires(nombre_del_paquete)` para cualquier prueba que requiera la dependencia.

## Agregar un cuaderno de Jupyter

Si est谩s agregando un ejemplo de cuaderno de Jupyter, querr谩s instalar las dependencias opcionales `dev`.

Para instalar las dependencias de desarrollo:

```bash
poetry install --with dev
```

Inicia un cuaderno:

```bash
poetry run jupyter notebook
```

Cuando ejecutas `poetry install`, el paquete `langchain` se instala como editable en el entorno virtual, por lo que tu nueva l贸gica se puede importar en el cuaderno.
