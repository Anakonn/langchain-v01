---
sidebar_position: 2
translated: true
---

# परीक्षण

हमारे सभी पैकेज में यूनिट टेस्ट और एकीकरण टेस्ट हैं, और हम एकीकरण टेस्ट से ज्यादा यूनिट टेस्ट का पक्ष लेते हैं।

यूनिट टेस्ट हर पुल अनुरोध पर चलते हैं, इसलिए उन्हें तेज और विश्वसनीय होना चाहिए।

एकीकरण टेस्ट एक दिन में एक बार चलते हैं, और उन्हें बाहरी सेवाओं के साथ इंटरफ़ेस बिंदुओं की पुष्टि करने के लिए आरक्षित किया जाना चाहिए।

## यूनिट टेस्ट

यूनिट टेस्ट बाहरी API पर कॉल किए बिना मॉड्यूलर तर्क को कवर करते हैं।
यदि आप नया तर्क जोड़ते हैं, तो कृपया एक यूनिट टेस्ट जोड़ें।

यूनिट टेस्ट के लिए निर्भरताएं स्थापित करने के लिए:

```bash
poetry install --with test
```

यूनिट टेस्ट चलाने के लिए:

```bash
make test
```

Docker में यूनिट टेस्ट चलाने के लिए:

```bash
make docker_tests
```

किसी विशिष्ट टेस्ट को चलाने के लिए:

```bash
TEST_FILE=tests/unit_tests/test_imports.py make test
```

## एकीकरण टेस्ट

एकीकरण टेस्ट बाहरी API (अक्सर अन्य सेवाओं के साथ एकीकरण) को कॉल करने वाले तर्क को कवर करते हैं।
यदि आप किसी नए बाहरी API का समर्थन जोड़ते हैं, तो कृपया एक नया एकीकरण टेस्ट जोड़ें।

**चेतावनी:** लगभग कोई भी टेस्ट एकीकरण टेस्ट नहीं होना चाहिए।

  नेटवर्क कनेक्शन बनाने वाले टेस्ट अन्य डेवलपर्स के लिए कोड का परीक्षण करना मुश्किल बना देते हैं।

  बजाय इसके, `responses` लाइब्रेरी और/या mock.patch का उपयोग करके छोटे फिक्सचर का उपयोग करके अनुरोधों को मॉक करने पर भरोसा करें।

एकीकरण टेस्ट के लिए निर्भरताएं स्थापित करने के लिए:

```bash
poetry install --with test,test_integration
```

एकीकरण टेस्ट चलाने के लिए:

```bash
make integration_tests
```

### तैयारी

एकीकरण टेस्ट कई सर्च इंजन और डेटाबेस का उपयोग करते हैं। टेस्ट उनके विनिर्देशों और आवश्यकताओं के अनुसार इंजनों और डेटाबेस के सही व्यवहार की पुष्टि करने का लक्ष्य रखते हैं।

कुछ एकीकरण टेस्ट चलाने के लिए, जैसे `tests/integration_tests/vectorstores/` में स्थित टेस्ट, आपको निम्नलिखित सॉफ्टवेयर स्थापित करना होगा:

- Docker
- Python 3.8.1 या बाद का

कोई नई निर्भरताएं निम्नलिखित चलाकर जोड़ी जानी चाहिए:

```bash
# add package and install it after adding:
poetry add tiktoken@latest --group "test_integration" && poetry install --with test_integration
```

किसी भी टेस्ट को चलाने से पहले, आपको एक विशिष्ट Docker कंटेनर शुरू करना चाहिए जिसमें सभी आवश्यक निर्भरताएं स्थापित हैं। उदाहरण के लिए, हम `test_elasticsearch.py` के लिए `elasticsearch.yml` कंटेनर का उपयोग करते हैं:

```bash
cd tests/integration_tests/vectorstores/docker-compose
docker-compose -f elasticsearch.yml up
```

अधिक जटिल तैयारी वाले वातावरणों के लिए, `*.sh` देखें। उदाहरण के लिए, `opensearch.sh` एक आवश्यक Docker छवि बनाता है और फिर opensearch लॉन्च करता है।

### स्थानीय परीक्षण के लिए वातावरण चर तैयार करें:

- `tests/integration_tests/.env.example` को `tests/integration_tests/.env` में कॉपी करें
- `tests/integration_tests/.env` फ़ाइल में चर सेट करें, जैसे `OPENAI_API_KEY`

इसके अलावा, यह ध्यान रखना महत्वपूर्ण है कि कुछ एकीकरण टेस्ट को `OPENAI_API_KEY` जैसे कुछ वातावरण चर सेट करने की आवश्यकता हो सकती है। टेस्ट सही ढंग से चलने सुनिश्चित करने के लिए कृपया आवश्यक वातावरण चर सेट करें।

### pytest-vcr के साथ HTTP इंटरैक्शन रिकॉर्ड करना

इस रिपॉजिटरी में कुछ एकीकरण टेस्ट बाहरी सेवाओं को HTTP अनुरोध करने से जुड़े हैं। टेस्ट चलाने के हर बार इन अनुरोधों को किए जाने से रोकने के लिए, हम pytest-vcr का उपयोग करते हैं ताकि HTTP इंटरैक्शन को रिकॉर्ड और पुनः प्ले किया जा सके।

CI/CD पाइपलाइन में टेस्ट चलाते समय, आप मौजूदा कैसेट को संशोधित नहीं करना चाहते हो। आप --vcr-record=none कमांड-लाइन विकल्प का उपयोग करके नए कैसेट रिकॉर्डिंग को अक्षम कर सकते हैं। यहाँ एक उदाहरण है:

```bash
pytest --log-cli-level=10 tests/integration_tests/vectorstores/test_pinecone.py --vcr-record=none
pytest tests/integration_tests/vectorstores/test_elasticsearch.py --vcr-record=none

```

### कवरेज के साथ कुछ टेस्ट चलाएं:

```bash
pytest tests/integration_tests/vectorstores/test_elasticsearch.py --cov=langchain --cov-report=html
start "" htmlcov/index.html || open htmlcov/index.html

```

## कवरेज

कोड कवरेज (यानी यूनिट टेस्ट द्वारा कवर किए गए कोड का मात्रा) कोड के उन क्षेत्रों की पहचान करने में मदद करता है जो संभवतः अधिक या कम नाजुक हो सकते हैं।

कवरेज के लिए एकीकरण टेस्ट की निर्भरताएं आवश्यक हैं:

```bash
poetry install --with test_integration
```

वर्तमान कवरेज की रिपोर्ट प्राप्त करने के लिए, निम्नलिखित चलाएं:

```bash
make coverage
```
