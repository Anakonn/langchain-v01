---
translated: true
---

# ‡§ï‡§∏‡•ç‡§ü‡§Æ ‡§Ü‡§â‡§ü‡§™‡•Å‡§ü ‡§™‡§æ‡§∞‡•ç‡§∏‡§∞‡•ç‡§∏

‡§ï‡•Å‡§õ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§Ü‡§™ ‡§è‡§ï ‡§ï‡§∏‡•ç‡§ü‡§Æ ‡§™‡§æ‡§∞‡•ç‡§∏‡§∞ ‡§ï‡•ã ‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•ã ‡§ú‡•ã ‡§Æ‡•â‡§°‡§≤ ‡§Ü‡§â‡§ü‡§™‡•Å‡§ü ‡§ï‡•ã ‡§è‡§ï ‡§ï‡§∏‡•ç‡§ü‡§Æ ‡§™‡•ç‡§∞‡§æ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§∏‡§Ç‡§∞‡§ö‡§ø‡§§ ‡§ï‡§∞‡•á‡•§

‡§ï‡§∏‡•ç‡§ü‡§Æ ‡§™‡§æ‡§∞‡•ç‡§∏‡§∞ ‡§ï‡•ã ‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§¶‡•ã ‡§§‡§∞‡•Ä‡§ï‡•á ‡§π‡•à‡§Ç:

1. LCEL ‡§Æ‡•á‡§Ç `RunnableLambda` ‡§Ø‡§æ `RunnableGenerator` ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§®‡§æ - ‡§π‡§Æ ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§Ç‡§∂ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§Æ‡§æ‡§Æ‡§≤‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§á‡§∏‡§ï‡•Ä ‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç
2. ‡§™‡§æ‡§∞‡•ç‡§∏‡§ø‡§Ç‡§ó ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§ß‡§æ‡§∞‡§≠‡•Ç‡§§ ‡§µ‡§∞‡•ç‡§ó‡•ã‡§Ç ‡§∏‡•á ‡§Ö‡§®‡•Å‡§µ‡§∞‡•ç‡§§‡§® ‡§ï‡§∞‡§®‡§æ - ‡§Ø‡§π ‡§ö‡•Ä‡§ú‡•ã‡§Ç ‡§ï‡•ã ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ ‡§ï‡§†‡§ø‡§® ‡§§‡§∞‡•Ä‡§ï‡§æ ‡§π‡•à

‡§á‡§® ‡§¶‡•ã ‡§¶‡•É‡§∑‡•ç‡§ü‡§ø‡§ï‡•ã‡§£‡•ã‡§Ç ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§ï‡§æ ‡§Ö‡§Ç‡§§‡§∞ ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§∏‡§§‡§π‡•Ä ‡§π‡•à ‡§î‡§∞ ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§â‡§® ‡§ï‡•â‡§≤‡§¨‡•à‡§ï‡•ç‡§∏ ‡§Æ‡•á‡§Ç ‡§π‡•à ‡§ú‡•ã ‡§ü‡•ç‡§∞‡§ø‡§ó‡§∞ ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç (‡§ú‡•à‡§∏‡•á, `on_chain_start` ‡§¨‡§®‡§æ‡§Æ `on_parser_start`), ‡§î‡§∞ ‡§è‡§ï ‡§∞‡§®‡•á‡§¨‡§≤ ‡§≤‡•à‡§Æ‡•ç‡§¨‡§°‡§æ ‡§¨‡§®‡§æ‡§Æ ‡§è‡§ï ‡§™‡§æ‡§∞‡•ç‡§∏‡§∞ ‡§ï‡•ã ‡§è‡§ï ‡§ü‡•ç‡§∞‡•á‡§∏‡§ø‡§Ç‡§ó ‡§™‡•ç‡§≤‡•á‡§ü‡§´‡•â‡§∞‡•ç‡§Æ ‡§ú‡•à‡§∏‡•á LangSmith ‡§Æ‡•á‡§Ç ‡§ï‡•à‡§∏‡•á ‡§¶‡•É‡§∂‡•ç‡§Ø‡§Æ‡§æ‡§® ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§

## ‡§∞‡§®‡•á‡§¨‡§≤ ‡§≤‡•à‡§Æ‡•ç‡§¨‡§°‡§æ ‡§î‡§∞ ‡§ú‡§®‡§∞‡•á‡§ü‡§∞

‡§™‡§æ‡§∞‡•ç‡§∏‡§ø‡§Ç‡§ó ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ ‡§Ö‡§®‡•Å‡§∂‡§Ç‡§∏‡§ø‡§§ ‡§§‡§∞‡•Ä‡§ï‡§æ **‡§∞‡§®‡•á‡§¨‡§≤ ‡§≤‡•à‡§Æ‡•ç‡§¨‡§°‡§æ** ‡§î‡§∞ **‡§∞‡§®‡•á‡§¨‡§≤ ‡§ú‡§®‡§∞‡•á‡§ü‡§∞** ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§®‡§æ ‡§π‡•à!

‡§Ø‡§π‡§æ‡§Å, ‡§π‡§Æ ‡§è‡§ï ‡§∏‡§∞‡§≤ ‡§™‡§æ‡§∞‡•ç‡§∏‡§∞ ‡§¨‡§®‡§æ‡§è‡§Ç‡§ó‡•á ‡§ú‡•ã ‡§Æ‡•â‡§°‡§≤ ‡§∏‡•á ‡§Ü‡§â‡§ü‡§™‡•Å‡§ü ‡§ï‡•ã ‡§â‡§≤‡•ç‡§ü‡§æ ‡§ï‡§∞‡•á‡§ó‡§æ‡•§

‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§Ø‡§¶‡§ø ‡§Æ‡•â‡§°‡§≤ "Meow" ‡§Ü‡§â‡§ü‡§™‡•Å‡§ü ‡§ï‡§∞‡§§‡§æ ‡§π‡•à, ‡§§‡•ã ‡§™‡§æ‡§∞‡•ç‡§∏‡§∞ "mEOW" ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§ï‡§∞‡•á‡§ó‡§æ‡•§

```python
from typing import Iterable

from langchain_anthropic.chat_models import ChatAnthropic
from langchain_core.messages import AIMessage, AIMessageChunk

model = ChatAnthropic(model_name="claude-2.1")


def parse(ai_message: AIMessage) -> str:
    """Parse the AI message."""
    return ai_message.content.swapcase()


chain = model | parse
chain.invoke("hello")
```
```output
'hELLO!'
```

:::tip

LCEL ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á `parse` ‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§® ‡§ï‡•ã `RunnableLambda(parse)` ‡§Æ‡•á‡§Ç ‡§Ö‡§™‡§ó‡•ç‡§∞‡•á‡§° ‡§ï‡§∞‡§§‡§æ ‡§π‡•à ‡§ú‡§¨ `|` ‡§∏‡§Ç‡§ï‡•ç‡§∑‡§ø‡§™‡•ç‡§§ ‡§µ‡§æ‡§ï‡•ç‡§Ø‡§µ‡§ø‡§®‡•ç‡§Ø‡§æ‡§∏ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§ï‡•á ‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à‡•§

‡§Ø‡§¶‡§ø ‡§Ü‡§™ ‡§á‡§∏‡§∏‡•á ‡§ñ‡•Å‡§∂ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡§Ç, ‡§§‡•ã ‡§Ü‡§™ ‡§Æ‡•à‡§®‡•ç‡§Ø‡•Å‡§Ö‡§≤ ‡§∞‡•Ç‡§™ ‡§∏‡•á `RunnableLambda` ‡§Ü‡§Ø‡§æ‡§§ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§´‡§ø‡§∞ `parse = RunnableLambda(parse)` ‡§ö‡§≤‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§
:::

‡§ï‡•ç‡§Ø‡§æ ‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Æ‡§ø‡§Ç‡§ó ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à?

```python
for chunk in chain.stream("tell me about yourself in one sentence"):
    print(chunk, end="|", flush=True)
```
```output
i'M cLAUDE, AN ai ASSISTANT CREATED BY aNTHROPIC TO BE HELPFUL, HARMLESS, AND HONEST.|
```

‡§®‡§π‡•Ä‡§Ç, ‡§Ø‡§π ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞‡§§‡§æ ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø ‡§™‡§æ‡§∞‡•ç‡§∏‡§∞ ‡§á‡§®‡§™‡•Å‡§ü ‡§ï‡•ã ‡§è‡§ï‡§§‡•ç‡§∞‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§´‡§ø‡§∞ ‡§Ü‡§â‡§ü‡§™‡•Å‡§ü ‡§ï‡•ã ‡§™‡§æ‡§∞‡•ç‡§∏ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§

‡§Ø‡§¶‡§ø ‡§π‡§Æ ‡§è‡§ï ‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Æ‡§ø‡§Ç‡§ó ‡§™‡§æ‡§∞‡•ç‡§∏‡§∞ ‡§ï‡•ã ‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç, ‡§§‡•ã ‡§π‡§Æ ‡§™‡§æ‡§∞‡•ç‡§∏‡§∞ ‡§ï‡•ã ‡§á‡§®‡§™‡•Å‡§ü ‡§™‡§∞ ‡§è‡§ï ‡§á‡§ü‡§∞‡•á‡§¨‡§≤ ‡§∏‡•ç‡§µ‡•Ä‡§ï‡§æ‡§∞ ‡§ï‡§∞‡§µ‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§ï‡•ã ‡§ú‡•à‡§∏‡•á ‡§π‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç, ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§

```python
from langchain_core.runnables import RunnableGenerator


def streaming_parse(chunks: Iterable[AIMessageChunk]) -> Iterable[str]:
    for chunk in chunks:
        yield chunk.content.swapcase()


streaming_parse = RunnableGenerator(streaming_parse)
```

:::important

‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Æ‡§ø‡§Ç‡§ó ‡§™‡§æ‡§∞‡•ç‡§∏‡§∞ ‡§ï‡•ã `RunnableGenerator` ‡§Æ‡•á‡§Ç ‡§≤‡§™‡•á‡§ü‡•á‡§Ç ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø ‡§π‡§Æ ‡§á‡§∏‡•á `|` ‡§∏‡§Ç‡§ï‡•ç‡§∑‡§ø‡§™‡•ç‡§§ ‡§µ‡§æ‡§ï‡•ç‡§Ø‡§µ‡§ø‡§®‡•ç‡§Ø‡§æ‡§∏ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§Ö‡§™‡§ó‡•ç‡§∞‡•á‡§° ‡§ï‡§∞‡§®‡§æ ‡§¨‡§Ç‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§
:::

```python
chain = model | streaming_parse
chain.invoke("hello")
```
```output
'hELLO!'
```

‡§ö‡§≤‡•ã ‡§Ø‡§π ‡§™‡•Å‡§∑‡•ç‡§ü‡§ø ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç ‡§ï‡§ø ‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Æ‡§ø‡§Ç‡§ó ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à!

```python
for chunk in chain.stream("tell me about yourself in one sentence"):
    print(chunk, end="|", flush=True)
```
```output
i|'M| cLAUDE|,| AN| ai| ASSISTANT| CREATED| BY| aN|THROP|IC| TO| BE| HELPFUL|,| HARMLESS|,| AND| HONEST|.|
```

## ‡§™‡§æ‡§∞‡•ç‡§∏‡§ø‡§Ç‡§ó ‡§Ü‡§ß‡§æ‡§∞‡§≠‡•Ç‡§§ ‡§µ‡§∞‡•ç‡§ó‡•ã‡§Ç ‡§∏‡•á ‡§Ö‡§®‡•Å‡§µ‡§∞‡•ç‡§§‡§® ‡§ï‡§∞‡§®‡§æ

‡§™‡§æ‡§∞‡•ç‡§∏‡§∞ ‡§ï‡•ã ‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ ‡§è‡§ï ‡§î‡§∞ ‡§¶‡•É‡§∑‡•ç‡§ü‡§ø‡§ï‡•ã‡§£ `BaseOutputParser`, `BaseGenerationOutputParser` ‡§Ø‡§æ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§Ö‡§®‡•ç‡§Ø ‡§Ü‡§ß‡§æ‡§∞‡§≠‡•Ç‡§§ ‡§™‡§æ‡§∞‡•ç‡§∏‡§∞‡•ã‡§Ç ‡§∏‡•á ‡§Ö‡§®‡•Å‡§µ‡§∞‡•ç‡§§‡§® ‡§ï‡§∞‡§®‡§æ ‡§π‡•à‡•§

‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§§‡•å‡§∞ ‡§™‡§∞, ‡§π‡§Æ ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§Ç‡§∂ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§Æ‡§æ‡§Æ‡§≤‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§á‡§∏ ‡§¶‡•É‡§∑‡•ç‡§ü‡§ø‡§ï‡•ã‡§£ ‡§ï‡•Ä ‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞‡§§‡•á ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø ‡§á‡§∏‡§∏‡•á ‡§≤‡§ø‡§ñ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§ß‡§ø‡§ï ‡§ï‡•ã‡§° ‡§π‡•ã‡§§‡§æ ‡§π‡•à, ‡§≤‡•á‡§ï‡§ø‡§® ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§≤‡§æ‡§≠ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã‡§§‡•á‡•§

‡§∏‡§¨‡§∏‡•á ‡§∏‡§∞‡§≤ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ï‡§æ ‡§Ü‡§â‡§ü‡§™‡•Å‡§ü ‡§™‡§æ‡§∞‡•ç‡§∏‡§∞ `BaseOutputParser` ‡§µ‡§∞‡•ç‡§ó ‡§ï‡§æ ‡§µ‡§ø‡§∏‡•ç‡§§‡§æ‡§∞ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§µ‡§ø‡§ß‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§∞‡§®‡§æ ‡§π‡•ã‡§§‡§æ ‡§π‡•à:

* `parse`: ‡§Æ‡•â‡§°‡§≤ ‡§∏‡•á ‡§∏‡•ç‡§ü‡•ç‡§∞‡§ø‡§Ç‡§ó ‡§Ü‡§â‡§ü‡§™‡•Å‡§ü ‡§≤‡•á‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§á‡§∏‡•á ‡§™‡§æ‡§∞‡•ç‡§∏ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à
* (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï) `_type`: ‡§™‡§æ‡§∞‡•ç‡§∏‡§∞ ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§™‡§π‡§ö‡§æ‡§®‡§§‡§æ ‡§π‡•à‡•§

‡§ú‡§¨ ‡§ö‡•à‡§ü ‡§Æ‡•â‡§°‡§≤ ‡§Ø‡§æ LLM ‡§∏‡•á ‡§Ü‡§â‡§ü‡§™‡•Å‡§ü ‡§ó‡§≤‡§§ ‡§™‡•ç‡§∞‡§æ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§π‡•ã‡§§‡§æ ‡§π‡•à, ‡§§‡•ã ‡§Ø‡§π `OutputParserException` ‡§ï‡•ã ‡§´‡•á‡§Ç‡§ï ‡§∏‡§ï‡§§‡§æ ‡§π‡•à ‡§§‡§æ‡§ï‡§ø ‡§á‡§Ç‡§ó‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡•á ‡§ï‡§ø ‡§ñ‡§∞‡§æ‡§¨ ‡§á‡§®‡§™‡•Å‡§ü ‡§ï‡•á ‡§ï‡§æ‡§∞‡§£ ‡§™‡§æ‡§∞‡•ç‡§∏‡§ø‡§Ç‡§ó ‡§µ‡§ø‡§´‡§≤ ‡§π‡•ã ‡§ó‡§à ‡§π‡•à‡•§ ‡§á‡§∏ ‡§Ö‡§™‡§µ‡§æ‡§¶ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§®‡•á ‡§∏‡•á ‡§ï‡•ã‡§° ‡§ú‡•ã ‡§™‡§æ‡§∞‡•ç‡§∏‡§∞ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§§‡§æ ‡§π‡•à, ‡§á‡§∏‡•á ‡§è‡§ï ‡§∏‡•Å‡§∏‡§Ç‡§ó‡§§ ‡§§‡§∞‡•Ä‡§ï‡•á ‡§∏‡•á ‡§∏‡§Ç‡§≠‡§æ‡§≤ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§

:::tip ‡§™‡§æ‡§∞‡•ç‡§∏‡§∞ ‡§∞‡§®‡•á‡§¨‡§≤‡•ç‡§∏ ‡§π‡•à‡§Ç! üèÉ

‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø `BaseOutputParser` `Runnable` ‡§á‡§Ç‡§ü‡§∞‡§´‡§º‡•á‡§∏ ‡§ï‡•ã ‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§∞‡§§‡§æ ‡§π‡•à, ‡§á‡§∏ ‡§§‡§∞‡§π ‡§∏‡•á ‡§Ü‡§™ ‡§¨‡§®‡§æ‡§è‡§Ç‡§ó‡•á ‡§ï‡•ã‡§à ‡§≠‡•Ä ‡§ï‡§∏‡•ç‡§ü‡§Æ ‡§™‡§æ‡§∞‡•ç‡§∏‡§∞ ‡§µ‡•à‡§ß LangChain ‡§∞‡§®‡•á‡§¨‡§≤‡•ç‡§∏ ‡§¨‡§® ‡§ú‡§æ‡§è‡§ó‡§æ ‡§î‡§∞ ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§Ö‡§∏‡§ø‡§Ç‡§ï‡•ç‡§∞‡•ã‡§®‡§∏ ‡§∏‡§Æ‡§∞‡•ç‡§•‡§®, ‡§¨‡•à‡§ö ‡§á‡§Ç‡§ü‡§∞‡§´‡§º‡•á‡§∏, ‡§≤‡•â‡§ó‡§ø‡§Ç‡§ó ‡§∏‡§Æ‡§∞‡•ç‡§•‡§® ‡§Ü‡§¶‡§ø ‡§ï‡§æ ‡§≤‡§æ‡§≠ ‡§â‡§†‡§æ‡§è‡§ó‡§æ‡•§
:::

### ‡§∏‡§∞‡§≤ ‡§™‡§æ‡§∞‡•ç‡§∏‡§∞

‡§Ø‡§π‡§æ‡§Å ‡§è‡§ï ‡§∏‡§∞‡§≤ ‡§™‡§æ‡§∞‡•ç‡§∏‡§∞ ‡§π‡•à ‡§ú‡•ã **‡§∏‡•ç‡§ü‡•ç‡§∞‡§ø‡§Ç‡§ó** ‡§™‡•ç‡§∞‡§§‡§ø‡§®‡§ø‡§ß‡§ø‡§§‡•ç‡§µ ‡§ï‡•ã ‡§™‡§æ‡§∞‡•ç‡§∏ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§á‡§∏‡•á ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ `boolean` ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§Æ‡•á‡§Ç ‡§™‡§∞‡§ø‡§µ‡§∞‡•ç‡§§‡§ø‡§§ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§

```python
from langchain_core.exceptions import OutputParserException
from langchain_core.output_parsers import BaseOutputParser


# The [bool] desribes a parameterization of a generic.
# It's basically indicating what the return type of parse is
# in this case the return type is either True or False
class BooleanOutputParser(BaseOutputParser[bool]):
    """Custom boolean parser."""

    true_val: str = "YES"
    false_val: str = "NO"

    def parse(self, text: str) -> bool:
        cleaned_text = text.strip().upper()
        if cleaned_text not in (self.true_val.upper(), self.false_val.upper()):
            raise OutputParserException(
                f"BooleanOutputParser expected output value to either be "
                f"{self.true_val} or {self.false_val} (case-insensitive). "
                f"Received {cleaned_text}."
            )
        return cleaned_text == self.true_val.upper()

    @property
    def _type(self) -> str:
        return "boolean_output_parser"
```
```python
parser = BooleanOutputParser()
parser.invoke("YES")
```
```output
True
```
```python
try:
    parser.invoke("MEOW")
except Exception as e:
    print(f"Triggered an exception of type: {type(e)}")
```
```output
Triggered an exception of type: <class 'langchain_core.exceptions.OutputParserException'>
```

‡§ö‡§≤‡•ã ‡§™‡•à‡§∞‡§æ‡§Æ‡•Ä‡§ü‡§∞‡•Ä‡§ï‡§∞‡§£ ‡§ï‡•ã ‡§¨‡§¶‡§≤‡§®‡•á ‡§ï‡§æ ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§£ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç

```python
parser = BooleanOutputParser(true_val="OKAY")
parser.invoke("OKAY")
```
```output
True
```

‡§ö‡§≤‡•ã ‡§™‡•Å‡§∑‡•ç‡§ü‡§ø ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç ‡§ï‡§ø ‡§Ö‡§®‡•ç‡§Ø LCEL ‡§µ‡§ø‡§ß‡§ø‡§Ø‡§æ‡§Å ‡§Æ‡•å‡§ú‡•Ç‡§¶ ‡§π‡•à‡§Ç

```python
parser.batch(["OKAY", "NO"])
```
```output
[True, False]
```
```python
await parser.abatch(["OKAY", "NO"])
```
```output
[True, False]
```
```python
from langchain_anthropic.chat_models import ChatAnthropic

anthropic = ChatAnthropic(model_name="claude-2.1")
anthropic.invoke("say OKAY or NO")
```
```output
AIMessage(content='OKAY')
```

‡§ö‡§≤‡•ã ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§£ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç ‡§ï‡§ø ‡§π‡§Æ‡§æ‡§∞‡§æ ‡§™‡§æ‡§∞‡•ç‡§∏‡§∞ ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à!

```python
chain = anthropic | parser
chain.invoke("say OKAY or NO")
```
```output
True
```

:::note
‡§™‡§æ‡§∞‡•ç‡§∏‡§∞ LLM ‡§∏‡•á ‡§Ü‡§â‡§ü‡§™‡•Å‡§ü (‡§∏‡•ç‡§ü‡•ç‡§∞‡§ø‡§Ç‡§ó) ‡§Ø‡§æ ‡§ö‡•à‡§ü ‡§Æ‡•â‡§°‡§≤ ‡§∏‡•á ‡§Ü‡§â‡§ü‡§™‡•Å‡§ü (‡§è‡§ï `AIMessage`) ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡•á‡§ó‡§æ!
:::

### ‡§ï‡§ö‡•ç‡§ö‡•á ‡§Æ‡•â‡§°‡§≤ ‡§Ü‡§â‡§ü‡§™‡•Å‡§ü‡•ç‡§∏ ‡§ï‡•ã ‡§™‡§æ‡§∞‡•ç‡§∏ ‡§ï‡§∞‡§®‡§æ

‡§ï‡§≠‡•Ä-‡§ï‡§≠‡•Ä ‡§Æ‡•â‡§°‡§≤ ‡§Ü‡§â‡§ü‡§™‡•Å‡§ü ‡§™‡§∞ ‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§Æ‡•á‡§ü‡§æ‡§°‡•á‡§ü‡§æ ‡§π‡•ã‡§§‡§æ ‡§π‡•à ‡§ú‡•ã ‡§ï‡§ö‡•ç‡§ö‡•á ‡§™‡§æ‡§† ‡§ï‡•á ‡§Ö‡§≤‡§æ‡§µ‡§æ ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§π‡•ã‡§§‡§æ ‡§π‡•à‡•§ ‡§á‡§∏‡§ï‡§æ ‡§è‡§ï ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§ü‡•Ç‡§≤ ‡§ï‡•â‡§≤‡§ø‡§Ç‡§ó ‡§π‡•à, ‡§ú‡§π‡§æ‡§Ç ‡§ï‡•â‡§≤ ‡§ï‡•Ä ‡§ó‡§à ‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§®‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§™‡§æ‡§∞‡§ø‡§§ ‡§ï‡§ø‡§è ‡§ú‡§æ‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§§‡§∞‡•ç‡§ï ‡§è‡§ï ‡§Ö‡§≤‡§ó ‡§ó‡•Å‡§£ ‡§Æ‡•á‡§Ç ‡§µ‡§æ‡§™‡§∏ ‡§ï‡§ø‡§è ‡§ú‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§Ø‡§¶‡§ø ‡§Ü‡§™ ‡§á‡§∏ ‡§Ö‡§ß‡§ø‡§ï ‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£ ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à, ‡§§‡•ã ‡§Ü‡§™ ‡§¨‡§ú‡§æ‡§Ø `BaseGenerationOutputParser` ‡§µ‡§∞‡•ç‡§ó ‡§∏‡•á ‡§â‡§§‡•ç‡§§‡§∞‡§æ‡§ß‡§ø‡§ï‡§æ‡§∞ ‡§≤‡•á ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§

‡§Ø‡§π ‡§µ‡§∞‡•ç‡§ó ‡§è‡§ï ‡§è‡§ï‡§Æ‡§æ‡§§‡•ç‡§∞ `parse_result` ‡§µ‡§ø‡§ß‡§ø ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡•§ ‡§Ø‡§π ‡§µ‡§ø‡§ß‡§ø ‡§ï‡§ö‡•ç‡§ö‡•á ‡§Æ‡•â‡§°‡§≤ ‡§Ü‡§â‡§ü‡§™‡•Å‡§ü (‡§ú‡•à‡§∏‡•á, `Generation` ‡§Ø‡§æ `ChatGeneration` ‡§ï‡•Ä ‡§∏‡•Ç‡§ö‡•Ä) ‡§≤‡•á‡§§‡•Ä ‡§π‡•à ‡§î‡§∞ ‡§™‡§æ‡§∞‡•ç‡§∏ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§Ü‡§â‡§ü‡§™‡•Å‡§ü ‡§µ‡§æ‡§™‡§∏ ‡§ï‡§∞‡§§‡•Ä ‡§π‡•à‡•§

`Generation` ‡§î‡§∞ `ChatGeneration` ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§ï‡§æ ‡§∏‡§Æ‡§∞‡•ç‡§•‡§® ‡§ï‡§∞‡§®‡§æ ‡§™‡§æ‡§∞‡•ç‡§∏‡§∞ ‡§ï‡•ã ‡§∞‡•á‡§ó‡•Å‡§≤‡§∞ LLM ‡§ï‡•á ‡§∏‡§æ‡§•-‡§∏‡§æ‡§• ‡§ö‡•à‡§ü ‡§Æ‡•â‡§°‡§≤ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§≠‡•Ä ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§ï‡•ç‡§∑‡§Æ ‡§¨‡§®‡§æ‡§§‡§æ ‡§π‡•à‡•§

```python
from typing import List

from langchain_core.exceptions import OutputParserException
from langchain_core.messages import AIMessage
from langchain_core.output_parsers import BaseGenerationOutputParser
from langchain_core.outputs import ChatGeneration, Generation


class StrInvertCase(BaseGenerationOutputParser[str]):
    """An example parser that inverts the case of the characters in the message.

    This is an example parse shown just for demonstration purposes and to keep
    the example as simple as possible.
    """

    def parse_result(self, result: List[Generation], *, partial: bool = False) -> str:
        """Parse a list of model Generations into a specific format.

        Args:
            result: A list of Generations to be parsed. The Generations are assumed
                to be different candidate outputs for a single model input.
                Many parsers assume that only a single generation is passed it in.
                We will assert for that
            partial: Whether to allow partial results. This is used for parsers
                     that support streaming
        """
        if len(result) != 1:
            raise NotImplementedError(
                "This output parser can only be used with a single generation."
            )
        generation = result[0]
        if not isinstance(generation, ChatGeneration):
            # Say that this one only works with chat generations
            raise OutputParserException(
                "This output parser can only be used with a chat generation."
            )
        return generation.message.content.swapcase()


chain = anthropic | StrInvertCase()
```

‡§ö‡§≤‡•ã ‡§®‡§è ‡§™‡§æ‡§∞‡•ç‡§∏‡§∞ ‡§ï‡§æ ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§£ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç! ‡§á‡§∏‡•á ‡§Æ‡•â‡§°‡§≤ ‡§∏‡•á ‡§Ü‡§â‡§ü‡§™‡•Å‡§ü ‡§ï‡•ã ‡§â‡§≤‡•ç‡§ü‡§æ ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è‡•§

```python
chain.invoke("Tell me a short sentence about yourself")
```
```output
'hELLO! mY NAME IS cLAUDE.'
```
