---
translated: true
---

# à¤¨à¥‡à¤¬à¥à¤¯à¥‚à¤²à¤¾ à¤—à¥à¤°à¤¾à¤«

>[à¤¨à¥‡à¤¬à¥à¤¯à¥‚à¤²à¤¾ à¤—à¥à¤°à¤¾à¤«](https://www.nebula-graph.io/) à¤à¤• à¤“à¤ªà¤¨-à¤¸à¥‹à¤°à¥à¤¸, à¤µà¤¿à¤¤à¤°à¤¿à¤¤, à¤¸à¥à¤•à¥‡à¤²à¥‡à¤¬à¤², à¤¤à¥‡à¤œà¤¼à¥€ à¤¸à¥‡ à¤šà¤²à¤¨à¥‡ à¤µà¤¾à¤²à¤¾ à¤—à¥à¤°à¤¾à¤« à¤¡à¥‡à¤Ÿà¤¾à¤¬à¥‡à¤¸ à¤¹à¥ˆ à¤œà¥‹ à¤¬à¤¹à¥à¤¤ à¤¬à¤¡à¤¼à¥‡ à¤ªà¥ˆà¤®à¤¾à¤¨à¥‡ à¤ªà¤° à¤—à¥à¤°à¤¾à¤«à¥‹à¤‚ à¤•à¥‡ à¤²à¤¿à¤ à¤®à¤¿à¤²à¥€à¤¸à¥‡à¤•à¤‚à¤¡ à¤•à¥€ à¤²à¥‡à¤Ÿà¥‡à¤‚à¤¸à¥€ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤¬à¤¨à¤¾à¤¯à¤¾ à¤—à¤¯à¤¾ à¤¹à¥ˆà¥¤ à¤¯à¤¹ `nGQL` à¤—à¥à¤°à¤¾à¤« à¤•à¥à¤µà¥‡à¤°à¥€ à¤­à¤¾à¤·à¤¾ à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¤¤à¤¾ à¤¹à¥ˆà¥¤

>`nGQL`(https://docs.nebula-graph.io/3.0.0/3.ngql-guide/1.nGQL-overview/1.overview/) `à¤¨à¥‡à¤¬à¥à¤¯à¥‚à¤²à¤¾ à¤—à¥à¤°à¤¾à¤«` à¤•à¥‡ à¤²à¤¿à¤ à¤à¤• à¤˜à¥‹à¤·à¤£à¤¾à¤¤à¥à¤®à¤• à¤—à¥à¤°à¤¾à¤« à¤•à¥à¤µà¥‡à¤°à¥€ à¤­à¤¾à¤·à¤¾ à¤¹à¥ˆà¥¤ à¤¯à¤¹ à¤…à¤­à¤¿à¤µà¥à¤¯à¤•à¥à¤¤ à¤”à¤° à¤•à¥à¤¶à¤² à¤—à¥à¤°à¤¾à¤« à¤ªà¥ˆà¤Ÿà¤°à¥à¤¨ à¤•à¥€ à¤…à¤¨à¥à¤®à¤¤à¤¿ à¤¦à¥‡à¤¤à¤¾ à¤¹à¥ˆà¥¤ `nGQL` à¤¡à¥‡à¤µà¤²à¤ªà¤°à¥à¤¸ à¤”à¤° à¤‘à¤ªà¤°à¥‡à¤¶à¤‚à¤¸ à¤ªà¥‡à¤¶à¥‡à¤µà¤°à¥‹à¤‚ à¤¦à¥‹à¤¨à¥‹à¤‚ à¤•à¥‡ à¤²à¤¿à¤ à¤¡à¤¿à¤œà¤¼à¤¾à¤‡à¤¨ à¤•à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾ à¤¹à¥ˆà¥¤ `nGQL` à¤à¤• SQL-à¤œà¥ˆà¤¸à¥€ à¤•à¥à¤µà¥‡à¤°à¥€ à¤­à¤¾à¤·à¤¾ à¤¹à¥ˆà¥¤

à¤¯à¤¹ à¤¨à¥‹à¤Ÿà¤¬à¥à¤• à¤¦à¤¿à¤–à¤¾à¤¤à¤¾ à¤¹à¥ˆ à¤•à¤¿ à¤•à¥ˆà¤¸à¥‡ à¤à¤²à¤à¤²à¤à¤® à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¤•à¥‡ `à¤¨à¥‡à¤¬à¥à¤¯à¥‚à¤²à¤¾ à¤—à¥à¤°à¤¾à¤«` à¤¡à¥‡à¤Ÿà¤¾à¤¬à¥‡à¤¸ à¤•à¥‡ à¤²à¤¿à¤ à¤à¤• à¤ªà¥à¤°à¤¾à¤•à¥ƒà¤¤à¤¿à¤• à¤­à¤¾à¤·à¤¾ à¤‡à¤‚à¤Ÿà¤°à¤«à¤¼à¥‡à¤¸ à¤ªà¥à¤°à¤¦à¤¾à¤¨ à¤•à¤¿à¤¯à¤¾ à¤œà¤¾ à¤¸à¤•à¤¤à¤¾ à¤¹à¥ˆà¥¤

## à¤¸à¥‡à¤Ÿà¤…à¤ª à¤•à¤°à¤¨à¤¾

à¤†à¤ª à¤¨à¤¿à¤®à¥à¤¨à¤²à¤¿à¤–à¤¿à¤¤ à¤¸à¥à¤•à¥à¤°à¤¿à¤ªà¥à¤Ÿ à¤šà¤²à¤¾à¤•à¤° à¤à¤• Docker à¤•à¤‚à¤Ÿà¥‡à¤¨à¤° à¤•à¥‡ à¤°à¥‚à¤ª à¤®à¥‡à¤‚ `à¤¨à¥‡à¤¬à¥à¤¯à¥‚à¤²à¤¾ à¤—à¥à¤°à¤¾à¤«` à¤•à¥à¤²à¤¸à¥à¤Ÿà¤° à¤¶à¥à¤°à¥‚ à¤•à¤° à¤¸à¤•à¤¤à¥‡ à¤¹à¥ˆà¤‚:

```bash
curl -fsSL nebula-up.siwei.io/install.sh | bash
```

à¤…à¤¨à¥à¤¯ à¤µà¤¿à¤•à¤²à¥à¤ª à¤¹à¥ˆà¤‚:
- [Docker Desktop à¤à¤•à¥à¤¸à¤Ÿà¥‡à¤‚à¤¶à¤¨](https://www.docker.com/blog/distributed-cloud-native-graph-database-nebulagraph-docker-extension/) à¤•à¥‡ à¤°à¥‚à¤ª à¤®à¥‡à¤‚ à¤¸à¥à¤¥à¤¾à¤ªà¤¿à¤¤ à¤•à¤°à¥‡à¤‚à¥¤ [à¤¯à¤¹à¤¾à¤‚](https://docs.nebula-graph.io/3.5.0/2.quick-start/1.quick-start-workflow/) à¤¦à¥‡à¤–à¥‡à¤‚
- à¤¨à¥‡à¤¬à¥à¤¯à¥‚à¤²à¤¾ à¤—à¥à¤°à¤¾à¤« à¤•à¥à¤²à¤¾à¤‰à¤¡ à¤¸à¥‡à¤µà¤¾à¥¤ [à¤¯à¤¹à¤¾à¤‚](https://www.nebula-graph.io/cloud) à¤¦à¥‡à¤–à¥‡à¤‚
- à¤ªà¥ˆà¤•à¥‡à¤œ, à¤¸à¥‹à¤°à¥à¤¸ à¤•à¥‹à¤¡ à¤¯à¤¾ Kubernetes à¤•à¥‡ à¤®à¤¾à¤§à¥à¤¯à¤® à¤¸à¥‡ à¤¤à¥ˆà¤¨à¤¾à¤¤ à¤•à¤°à¥‡à¤‚à¥¤ [à¤¯à¤¹à¤¾à¤‚](https://docs.nebula-graph.io/) à¤¦à¥‡à¤–à¥‡à¤‚

à¤à¤• à¤¬à¤¾à¤° à¤•à¥à¤²à¤¸à¥à¤Ÿà¤° à¤šà¤² à¤°à¤¹à¤¾ à¤¹à¥‹, à¤¤à¥‹ à¤¹à¤® à¤¡à¥‡à¤Ÿà¤¾à¤¬à¥‡à¤¸ à¤•à¥‡ à¤²à¤¿à¤ `SPACE` à¤”à¤° `SCHEMA` à¤¬à¤¨à¤¾ à¤¸à¤•à¤¤à¥‡ à¤¹à¥ˆà¤‚à¥¤

```python
%pip install --upgrade --quiet  ipython-ngql
%load_ext ngql

# connect ngql jupyter extension to nebulagraph
%ngql --address 127.0.0.1 --port 9669 --user root --password nebula
# create a new space
%ngql CREATE SPACE IF NOT EXISTS langchain(partition_num=1, replica_factor=1, vid_type=fixed_string(128));
```

```python
# Wait for a few seconds for the space to be created.
%ngql USE langchain;
```

à¤ªà¥‚à¤°à¥à¤£ à¤¡à¥‡à¤Ÿà¤¾à¤¸à¥‡à¤Ÿ à¤•à¥‡ à¤²à¤¿à¤ à¤¸à¥à¤•à¥€à¤®à¤¾ à¤¬à¤¨à¤¾à¤à¤‚, [à¤¯à¤¹à¤¾à¤‚](https://www.siwei.io/en/nebulagraph-etl-dbt/) à¤¦à¥‡à¤–à¥‡à¤‚à¥¤

```python
%%ngql
CREATE TAG IF NOT EXISTS movie(name string);
CREATE TAG IF NOT EXISTS person(name string, birthdate string);
CREATE EDGE IF NOT EXISTS acted_in();
CREATE TAG INDEX IF NOT EXISTS person_index ON person(name(128));
CREATE TAG INDEX IF NOT EXISTS movie_index ON movie(name(128));
```

à¤¸à¥à¤•à¥€à¤®à¤¾ à¤¨à¤¿à¤°à¥à¤®à¤¾à¤£ à¤ªà¥‚à¤°à¤¾ à¤¹à¥‹à¤¨à¥‡ à¤•à¤¾ à¤‡à¤‚à¤¤à¤œà¤¼à¤¾à¤° à¤•à¤°à¥‡à¤‚, à¤«à¤¿à¤° à¤¹à¤® à¤•à¥à¤› à¤¡à¥‡à¤Ÿà¤¾ à¤¡à¤¾à¤² à¤¸à¤•à¤¤à¥‡ à¤¹à¥ˆà¤‚à¥¤

```python
%%ngql
INSERT VERTEX person(name, birthdate) VALUES "Al Pacino":("Al Pacino", "1940-04-25");
INSERT VERTEX movie(name) VALUES "The Godfather II":("The Godfather II");
INSERT VERTEX movie(name) VALUES "The Godfather Coda: The Death of Michael Corleone":("The Godfather Coda: The Death of Michael Corleone");
INSERT EDGE acted_in() VALUES "Al Pacino"->"The Godfather II":();
INSERT EDGE acted_in() VALUES "Al Pacino"->"The Godfather Coda: The Death of Michael Corleone":();
```

```python
from langchain.chains import NebulaGraphQAChain
from langchain_community.graphs import NebulaGraph
from langchain_openai import ChatOpenAI
```

```python
graph = NebulaGraph(
    space="langchain",
    username="root",
    password="nebula",
    address="127.0.0.1",
    port=9669,
    session_pool_size=30,
)
```

## à¤—à¥à¤°à¤¾à¤« à¤¸à¥à¤•à¥€à¤®à¤¾ à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€ à¤¤à¤¾à¤œà¤¼à¤¾ à¤•à¤°à¥‡à¤‚

à¤¯à¤¦à¤¿ à¤¡à¥‡à¤Ÿà¤¾à¤¬à¥‡à¤¸ à¤•à¥€ à¤¸à¥à¤•à¥€à¤®à¤¾ à¤®à¥‡à¤‚ à¤ªà¤°à¤¿à¤µà¤°à¥à¤¤à¤¨ à¤¹à¥‹à¤¤à¤¾ à¤¹à¥ˆ, à¤¤à¥‹ à¤†à¤ª nGQL à¤¬à¤¯à¤¾à¤¨à¥‹à¤‚ à¤•à¥‹ à¤œà¤¨à¤°à¥‡à¤Ÿ à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤†à¤µà¤¶à¥à¤¯à¤• à¤¸à¥à¤•à¥€à¤®à¤¾ à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€ à¤¤à¤¾à¤œà¤¼à¤¾ à¤•à¤° à¤¸à¤•à¤¤à¥‡ à¤¹à¥ˆà¤‚à¥¤

```python
# graph.refresh_schema()
```

```python
print(graph.get_schema)
```

```output
Node properties: [{'tag': 'movie', 'properties': [('name', 'string')]}, {'tag': 'person', 'properties': [('name', 'string'), ('birthdate', 'string')]}]
Edge properties: [{'edge': 'acted_in', 'properties': []}]
Relationships: ['(:person)-[:acted_in]->(:movie)']
```

## à¤—à¥à¤°à¤¾à¤« à¤•à¤¾ à¤•à¥à¤µà¥‡à¤°à¥€ à¤•à¤°à¤¨à¤¾

à¤…à¤¬ à¤¹à¤® à¤—à¥à¤°à¤¾à¤« à¤¸à¤¾à¤¯à¤«à¤° à¤•à¥à¤¯à¥‚à¤ à¤¶à¥à¤°à¥ƒà¤‚à¤–à¤²à¤¾ à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¤•à¥‡ à¤—à¥à¤°à¤¾à¤« à¤¸à¥‡ à¤ªà¥à¤°à¤¶à¥à¤¨ à¤ªà¥‚à¤› à¤¸à¤•à¤¤à¥‡ à¤¹à¥ˆà¤‚à¥¤

```python
chain = NebulaGraphQAChain.from_llm(
    ChatOpenAI(temperature=0), graph=graph, verbose=True
)
```

```python
chain.run("Who played in The Godfather II?")
```

```output


[1m> Entering new NebulaGraphQAChain chain...[0m
Generated nGQL:
[32;1m[1;3mMATCH (p:`person`)-[:acted_in]->(m:`movie`) WHERE m.`movie`.`name` == 'The Godfather II'
RETURN p.`person`.`name`[0m
Full Context:
[32;1m[1;3m{'p.person.name': ['Al Pacino']}[0m

[1m> Finished chain.[0m
```

```output
'Al Pacino played in The Godfather II.'
```
