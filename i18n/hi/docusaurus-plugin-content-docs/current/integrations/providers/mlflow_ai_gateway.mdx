---
translated: true
---

# MLflow AI Gateway

:::warning

MLflow AI Gateway को रद्द कर दिया गया है। कृपया [MLflow Deployments for LLMs](/docs/integrations/providers/mlflow/) का उपयोग करें।

:::

>[MLflow AI Gateway](https://www.mlflow.org/docs/latest/index.html) सेवा एक शक्तिशाली उपकरण है जो संगठन में विभिन्न बड़े भाषा मॉडल (LLM) प्रदाताओं, जैसे OpenAI और Anthropic, के उपयोग और प्रबंधन को सरल बनाने के लिए डिज़ाइन किया गया है। यह LLM से संबंधित विशिष्ट अनुरोधों को संभालने के लिए एक एकीकृत एंडपॉइंट प्रदान करके इन सेवाओं के साथ संवाद को सरल बनाता है।

## स्थापना और सेटअप

`mlflow` को MLflow AI Gateway के निर्भरताओं के साथ स्थापित करें:

```sh
pip install 'mlflow[gateway]'
```

OpenAI API कुंजी को एक पर्यावरण चर के रूप में सेट करें:

```sh
export OPENAI_API_KEY=...
```

एक कॉन्फ़िगरेशन फ़ाइल बनाएं:

```yaml
routes:
  - name: completions
    route_type: llm/v1/completions
    model:
      provider: openai
      name: text-davinci-003
      config:
        openai_api_key: $OPENAI_API_KEY

  - name: embeddings
    route_type: llm/v1/embeddings
    model:
      provider: openai
      name: text-embedding-ada-002
      config:
        openai_api_key: $OPENAI_API_KEY
```

गेटवे सर्वर शुरू करें:

```sh
mlflow gateway start --config-path /path/to/config.yaml
```

## `MLflow` द्वारा प्रदान किया गया उदाहरण

>`mlflow.langchain` मॉड्यूल `LangChain` मॉडल को लॉग करने और लोड करने के लिए एक API प्रदान करता है।
> यह मॉड्यूल बहुविमीय LangChain मॉडल को langchain स्वाद में और एकविमीय LangChain
> मॉडल को pyfunc स्वाद में निर्यात करता है।

[API दस्तावेज़ीकरण और उदाहरण](https://www.mlflow.org/docs/latest/python_api/mlflow.langchain.html?highlight=langchain#module-mlflow.langchain) देखें।

## पूर्णता उदाहरण

```python
<!--IMPORTS:[{"imported": "LLMChain", "source": "langchain.chains", "docs": "https://api.python.langchain.com/en/latest/chains/langchain.chains.llm.LLMChain.html", "title": "MLflow AI Gateway"}, {"imported": "MlflowAIGateway", "source": "langchain_community.llms", "docs": "https://api.python.langchain.com/en/latest/llms/langchain_community.llms.mlflow_ai_gateway.MlflowAIGateway.html", "title": "MLflow AI Gateway"}]-->
import mlflow
from langchain.chains import LLMChain, PromptTemplate
from langchain_community.llms import MlflowAIGateway

gateway = MlflowAIGateway(
    gateway_uri="http://127.0.0.1:5000",
    route="completions",
    params={
        "temperature": 0.0,
        "top_p": 0.1,
    },
)

llm_chain = LLMChain(
    llm=gateway,
    prompt=PromptTemplate(
        input_variables=["adjective"],
        template="Tell me a {adjective} joke",
    ),
)
result = llm_chain.run(adjective="funny")
print(result)

with mlflow.start_run():
    model_info = mlflow.langchain.log_model(chain, "model")

model = mlflow.pyfunc.load_model(model_info.model_uri)
print(model.predict([{"adjective": "funny"}]))
```

## एम्बेडिंग उदाहरण

```python
<!--IMPORTS:[{"imported": "MlflowAIGatewayEmbeddings", "source": "langchain_community.embeddings", "docs": "https://api.python.langchain.com/en/latest/embeddings/langchain_community.embeddings.mlflow_gateway.MlflowAIGatewayEmbeddings.html", "title": "MLflow AI Gateway"}]-->
from langchain_community.embeddings import MlflowAIGatewayEmbeddings

embeddings = MlflowAIGatewayEmbeddings(
    gateway_uri="http://127.0.0.1:5000",
    route="embeddings",
)

print(embeddings.embed_query("hello"))
print(embeddings.embed_documents(["hello"]))
```

## चैट उदाहरण

```python
<!--IMPORTS:[{"imported": "ChatMLflowAIGateway", "source": "langchain_community.chat_models", "docs": "https://api.python.langchain.com/en/latest/chat_models/langchain_community.chat_models.mlflow_ai_gateway.ChatMLflowAIGateway.html", "title": "MLflow AI Gateway"}, {"imported": "HumanMessage", "source": "langchain_core.messages", "docs": "https://api.python.langchain.com/en/latest/messages/langchain_core.messages.human.HumanMessage.html", "title": "MLflow AI Gateway"}, {"imported": "SystemMessage", "source": "langchain_core.messages", "docs": "https://api.python.langchain.com/en/latest/messages/langchain_core.messages.system.SystemMessage.html", "title": "MLflow AI Gateway"}]-->
from langchain_community.chat_models import ChatMLflowAIGateway
from langchain_core.messages import HumanMessage, SystemMessage

chat = ChatMLflowAIGateway(
    gateway_uri="http://127.0.0.1:5000",
    route="chat",
    params={
        "temperature": 0.1
    }
)

messages = [
    SystemMessage(
        content="You are a helpful assistant that translates English to French."
    ),
    HumanMessage(
        content="Translate this sentence from English to French: I love programming."
    ),
]
print(chat(messages))
```

## Databricks MLflow AI Gateway

Databricks MLflow AI Gateway प्राइवेट प्रीव्यू में है।
प्रीव्यू में नामांकित होने के लिए कृपया Databricks प्रतिनिधि से संपर्क करें।

```python
<!--IMPORTS:[{"imported": "LLMChain", "source": "langchain.chains", "docs": "https://api.python.langchain.com/en/latest/chains/langchain.chains.llm.LLMChain.html", "title": "MLflow AI Gateway"}, {"imported": "PromptTemplate", "source": "langchain_core.prompts", "docs": "https://api.python.langchain.com/en/latest/prompts/langchain_core.prompts.prompt.PromptTemplate.html", "title": "MLflow AI Gateway"}, {"imported": "MlflowAIGateway", "source": "langchain_community.llms", "docs": "https://api.python.langchain.com/en/latest/llms/langchain_community.llms.mlflow_ai_gateway.MlflowAIGateway.html", "title": "MLflow AI Gateway"}]-->
from langchain.chains import LLMChain
from langchain_core.prompts import PromptTemplate
from langchain_community.llms import MlflowAIGateway

gateway = MlflowAIGateway(
    gateway_uri="databricks",
    route="completions",
)

llm_chain = LLMChain(
    llm=gateway,
    prompt=PromptTemplate(
        input_variables=["adjective"],
        template="Tell me a {adjective} joke",
    ),
)
result = llm_chain.run(adjective="funny")
print(result)
```
