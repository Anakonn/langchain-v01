---
translated: true
---

# рдЧреВрдЧрд▓ рд╕реНрдкреИрдирд░

> [рд╕реНрдкреИрдирд░](https://cloud.google.com/spanner) рдПрдХ рдЕрддреНрдпрдзрд┐рдХ рд╕реНрдХреЗрд▓реЗрдмрд▓ рдбреЗрдЯрд╛рдмреЗрд╕ рд╣реИ рдЬреЛ рдЕрдиреАрдорд┐рдХ рд╕реНрдХреЗрд▓реЗрдмрд┐рд▓рд┐рдЯреА рдХреЗ рд╕рд╛рде рд░рд┐рд▓реЗрд╢рдирд▓ рд╕реЗрдореЗрдВрдЯрд┐рдХреНрд╕, рдЬреИрд╕реЗ рд╕реЗрдХрдВрдбрд░реА рдЗрдВрдбреЗрдХреНрд╕, рдордЬрдмреВрдд рд╕реБрд╕рдВрдЧрддрд┐, рд╕реНрдХреАрдорд╛ рдФрд░ SQL рдХрд╛ рд╕рдВрдпреЛрдЬрди рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдПрдХ рдЖрд╕рд╛рди рд╕рдорд╛рдзрд╛рди рдореЗрдВ 99.999% рдЙрдкрд▓рдмреНрдзрддрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред

рдпрд╣ рдиреЛрдЯрдмреБрдХ [рд╕реНрдкреИрдирд░](https://cloud.google.com/spanner) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХреИрд╕реЗ `SpannerLoader` рдФрд░ `SpannerDocumentSaver` рдХреЗ рд╕рд╛рде [рд▓реИрдВрдЧрдЪреЗрди рджрд╕реНрддрд╛рд╡реЗрдЬреЛрдВ рдХреЛ рд╕рд╣реЗрдЬрдирд╛, рд▓реЛрдб рдХрд░рдирд╛ рдФрд░ рд╣рдЯрд╛рдирд╛](/docs/modules/data_connection/document_loaders/) рдХрд╛ рд╡рд┐рд╡рд░рдг рджреЗрддрд╛ рд╣реИред

рдкреИрдХреЗрдЬ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА [GitHub](https://github.com/googleapis/langchain-google-spanner-python/) рдкрд░ред

[![Open In Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/googleapis/langchain-google-spanner-python/blob/main/docs/document_loader.ipynb)

## рд╢реБрд░реВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ

рдЗрд╕ рдиреЛрдЯрдмреБрдХ рдХреЛ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛:

* [рдПрдХ рдЧреВрдЧрд▓ рдХреНрд▓рд╛рдЙрдб рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рдПрдВ](https://developers.google.com/workspace/guides/create-project)
* [рдХреНрд▓рд╛рдЙрдб рд╕реНрдкреИрдирд░ API рдХреЛ рд╕рдХреНрд╖рдо рдХрд░реЗрдВ](https://console.cloud.google.com/flows/enableapi?apiid=spanner.googleapis.com)
* [рдПрдХ рд╕реНрдкреИрдирд░ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдмрдирд╛рдПрдВ](https://cloud.google.com/spanner/docs/create-manage-instances)
* [рдПрдХ рд╕реНрдкреИрдирд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдмрдирд╛рдПрдВ](https://cloud.google.com/spanner/docs/create-manage-databases)
* [рдПрдХ рд╕реНрдкреИрдирд░ рдЯреЗрдмрд▓ рдмрдирд╛рдПрдВ](https://cloud.google.com/spanner/docs/create-query-database-console#create-schema)

рдЗрд╕ рдиреЛрдЯрдмреБрдХ рдХреЗ рд░рдирдЯрд╛рдЗрдо рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рдбреЗрдЯрд╛рдмреЗрд╕ рддрдХ рдкрд╣реБрдВрдЪ рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдореВрд▓реНрдпреЛрдВ рдХреЛ рднрд░реЗрдВ рдФрд░ рдЙрджрд╛рд╣рд░рдг рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЪрд▓рд╛рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд╕реЗрд▓ рдЪрд▓рд╛рдПрдВред

```python
# @markdown Please specify an instance id, a database, and a table for demo purpose.
INSTANCE_ID = "test_instance"  # @param {type:"string"}
DATABASE_ID = "test_database"  # @param {type:"string"}
TABLE_NAME = "test_table"  # @param {type:"string"}
```

### ЁЯжЬЁЯФЧ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди

рдПрдХреАрдХрд░рдг `langchain-google-spanner` рдкреИрдХреЗрдЬ рдореЗрдВ рдЕрдкрдиреЗ рдЦреБрдж рдХрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдореЗрдВ рдЗрд╕реЗ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред

```python
%pip install -upgrade --quiet langchain-google-spanner langchain
```

**рдХреЗрд╡рд▓ Colab**: рдХрд░реНрдирд▓ рдХреЛ рдкреБрдирдГ рдкреНрд░рд╛рд░рдВрдн рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕реЗрд▓ рдХреЛ рдЕрдирдХрдореЗрдВрдЯ рдХрд░реЗрдВ рдпрд╛ рдкреБрдирдГ рдкреНрд░рд╛рд░рдВрдн рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдЯрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред Vertex AI Workbench рдХреЗ рд▓рд┐рдП, рд╢реАрд░реНрд╖ рдкрд░ рджрд┐рдП рдЧрдП рдмрдЯрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЯрд░реНрдорд┐рдирд▓ рдХреЛ рдкреБрдирдГ рдкреНрд░рд╛рд░рдВрдн рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

```python
# # Automatically restart kernel after installs so that your environment can access the new packages
# import IPython

# app = IPython.Application.instance()
# app.kernel.do_shutdown(True)
```

### тШБ рдЕрдкрдиреЗ рдЧреВрдЧрд▓ рдХреНрд▓рд╛рдЙрдб рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╕реЗрдЯ рдХрд░реЗрдВ

рдЕрдкрдиреЗ рдЧреВрдЧрд▓ рдХреНрд▓рд╛рдЙрдб рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЛ рд╕реЗрдЯ рдХрд░реЗрдВ рддрд╛рдХрд┐ рдЖрдк рдЗрд╕ рдиреЛрдЯрдмреБрдХ рдореЗрдВ рдЧреВрдЧрд▓ рдХреНрд▓рд╛рдЙрдб рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХрд╛ рд▓рд╛рдн рдЙрдард╛ рд╕рдХреЗрдВред

рдпрджрд┐ рдЖрдк рдЕрдкрдиреЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЖрдИрдбреА рдХреЛ рдирд╣реАрдВ рдЬрд╛рдирддреЗ рд╣реИрдВ, рддреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ:

* `gcloud config list` рдЪрд▓рд╛рдПрдВред
* `gcloud projects list` рдЪрд▓рд╛рдПрдВред
* рд╕рдорд░реНрдерди рдкреГрд╖реНрда рджреЗрдЦреЗрдВ: [рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЖрдИрдбреА рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдПрдВ](https://support.google.com/googleapi/answer/7014113)ред

```python
# @markdown Please fill in the value below with your Google Cloud project ID and then run the cell.

PROJECT_ID = "my-project-id"  # @param {type:"string"}

# Set the project id
!gcloud config set project {PROJECT_ID}
```

### ЁЯФР рдкреНрд░рдорд╛рдгреАрдХрд░рдг

рдЗрд╕ рдиреЛрдЯрдмреБрдХ рдореЗрдВ рд▓реЙрдЧ рдЗрди рдХрд┐рдП рдЧрдП IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдЧреВрдЧрд▓ рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рдкреНрд░рдорд╛рдгрд┐рдд рдХрд░реЗрдВ рддрд╛рдХрд┐ рдЖрдк рдЕрдкрдиреЗ рдЧреВрдЧрд▓ рдХреНрд▓рд╛рдЙрдб рдкреНрд░реЛрдЬреЗрдХреНрдЯ рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХреЗрдВред

- рдпрджрд┐ рдЖрдк рдЗрд╕ рдиреЛрдЯрдмреБрдХ рдХреЛ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП Colab рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдиреАрдЪреЗ рджрд┐рдП рдЧрдП рд╕реЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдФрд░ рдЖрдЧреЗ рдмрдврд╝реЗрдВред
- рдпрджрд┐ рдЖрдк Vertex AI Workbench рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ [рдпрд╣рд╛рдВ](https://github.com/GoogleCloudPlatform/generative-ai/tree/main/setup-env) рджрд┐рдП рдЧрдП рд╕реЗрдЯрдЕрдк рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВред

```python
from google.colab import auth

auth.authenticate_user()
```

## рдореВрд▓рднреВрдд рдЙрдкрдпреЛрдЧ

### рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рд╕рд╣реЗрдЬрдирд╛

`SpannerDocumentSaver.add_documents(<documents>)` рдХреЗ рд╕рд╛рде рд▓реИрдВрдЧрдЪреЗрди рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рд╕рд╣реЗрдЬреЗрдВред `SpannerDocumentSaver` рдХреНрд▓рд╛рд╕ рдХреЛ рдкреНрд░рд╛рд░рдВрдн рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ 3 рдЪреАрдЬрд╝реЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ:

1. `instance_id` - рдбреЗрдЯрд╛ рд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдкреИрдирд░ рдХрд╛ рдПрдХ рдЗрдВрд╕реНрдЯреЗрдВрд╕ред
1. `database_id` - рдбреЗрдЯрд╛ рд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдкреИрдирд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдХрд╛ рдПрдХ рдЗрдВрд╕реНрдЯреЗрдВрд╕ред
1. `table_name` - рд╕реНрдкреИрдирд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рд▓реИрдВрдЧрдЪреЗрди рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХреЛ рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЯреЗрдмрд▓ рдХрд╛ рдирд╛рдоред

```python
from langchain_core.documents import Document
from langchain_google_spanner import SpannerDocumentSaver

test_docs = [
    Document(
        page_content="Apple Granny Smith 150 0.99 1",
        metadata={"fruit_id": 1},
    ),
    Document(
        page_content="Banana Cavendish 200 0.59 0",
        metadata={"fruit_id": 2},
    ),
    Document(
        page_content="Orange Navel 80 1.29 1",
        metadata={"fruit_id": 3},
    ),
]

saver = SpannerDocumentSaver(
    instance_id=INSTANCE_ID,
    database_id=DATABASE_ID,
    table_name=TABLE_NAME,
)
saver.add_documents(test_docs)
```

### рд╕реНрдкреИрдирд░ рд╕реЗ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХреНрд╡реЗрд░реА рдХрд░рдирд╛

рд╕реНрдкреИрдирд░ рдЯреЗрдмрд▓ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП, рдХреГрдкрдпрд╛ [Python SDK рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реАрдХрд░рдг](https://cloud.google.com/python/docs/reference/spanner/latest) рджреЗрдЦреЗрдВред

#### рдЯреЗрдмрд▓ рд╕реЗ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рд▓реЛрдб рдХрд░реЗрдВ

`SpannerLoader.load()` рдпрд╛ `SpannerLoader.lazy_load()` рдХреЗ рд╕рд╛рде рд▓реИрдВрдЧрдЪреЗрди рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рд▓реЛрдб рдХрд░реЗрдВред `lazy_load` рдПрдХ рдЬрдирд░реЗрдЯрд░ рд▓реМрдЯрд╛рддрд╛ рд╣реИ рдЬреЛ рдХреЗрд╡рд▓ рдЗрдЯрд░реЗрд╢рди рдХреЗ рджреМрд░рд╛рди рдбреЗрдЯрд╛рдмреЗрд╕ рдХреНрд╡реЗрд░реА рдХрд░рддрд╛ рд╣реИред `SpannerLoader` рдХреНрд▓рд╛рд╕ рдХреЛ рдкреНрд░рд╛рд░рдВрдн рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ:

1. `instance_id` - рдбреЗрдЯрд╛ рд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдкреИрдирд░ рдХрд╛ рдПрдХ рдЗрдВрд╕реНрдЯреЗрдВрд╕ред
1. `database_id` - рдбреЗрдЯрд╛ рд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдкреИрдирд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдХрд╛ рдПрдХ рдЗрдВрд╕реНрдЯреЗрдВрд╕ред
1. `query` - рдбреЗрдЯрд╛рдмреЗрд╕ рд╡рд╛рдХреНрдпрд╡рд┐рдиреНрдпрд╛рд╕ рдХрд╛ рдПрдХ рдХреНрд╡реЗрд░реАред

```python
from langchain_google_spanner import SpannerLoader

query = f"SELECT * from {TABLE_NAME}"
loader = SpannerLoader(
    instance_id=INSTANCE_ID,
    database_id=DATABASE_ID,
    query=query,
)

for doc in loader.lazy_load():
    print(doc)
    break
```

### рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рд╣рдЯрд╛рдирд╛

`SpannerDocumentSaver.delete(<documents>)` рдХреЗ рд╕рд╛рде рдЯреЗрдмрд▓ рд╕реЗ рдПрдХ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рд╕реВрдЪреА рд╣рдЯрд╛рдПрдВред

```python
docs = loader.load()
print("Documents before delete:", docs)

doc = test_docs[0]
saver.delete([doc])
print("Documents after delete:", loader.load())
```

## рдЙрдиреНрдирдд рдЙрдкрдпреЛрдЧ

### рдХрд╕реНрдЯрдо рдХреНрд▓рд╛рдЗрдВрдЯ

рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдХреНрд▓рд╛рдЗрдВрдЯ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдХреНрд▓рд╛рдЗрдВрдЯ рд╣реИред `credentials` рдФрд░ `project` рдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдкрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░ рдореЗрдВ рдПрдХ рдХрд╕реНрдЯрдо рдХреНрд▓рд╛рдЗрдВрдЯ рдкрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

```python
from google.cloud import spanner
from google.oauth2 import service_account

creds = service_account.Credentials.from_service_account_file("/path/to/key.json")
custom_client = spanner.Client(project="my-project", credentials=creds)
loader = SpannerLoader(
    INSTANCE_ID,
    DATABASE_ID,
    query,
    client=custom_client,
)
```

### рдкреГрд╖реНрда рд╕рд╛рдордЧреНрд░реА рдФрд░ рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдХреЛ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░реЗрдВ

рд▓реЛрдбрд░ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдбреЗрдЯрд╛ рдХреЙрд▓рдо рд╕реЗ рдкреГрд╖реНрда рд╕рд╛рдордЧреНрд░реА рдХреЗ рд╕рд╛рде рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА рд▓реМрдЯрд╛рддрд╛ рд╣реИред рдЕрдиреНрдп рд╕рднреА рдбреЗрдЯрд╛ рдХреЙрд▓рдо рдХреЛ рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЬрд╛рдПрдЧрд╛ред рдкреНрд░рддреНрдпреЗрдХ рдкрдВрдХреНрддрд┐ рдПрдХ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдмрди рдЬрд╛рддреА рд╣реИред

#### рдкреГрд╖реНрда рд╕рд╛рдордЧреНрд░реА рдкреНрд░рд╛рд░реВрдк рдХреЛ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░реЗрдВ

SpannerLoader рдорд╛рдирддрд╛ рд╣реИ рдХрд┐ `page_content` рдирд╛рдордХ рдПрдХ рдХреЙрд▓рдо рд╣реИред рдпреЗ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдХреЛ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ:

```python
custom_content_loader = SpannerLoader(
    INSTANCE_ID, DATABASE_ID, query, content_columns=["custom_content"]
)
```

рдпрджрд┐ рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рдХреЙрд▓рдо рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдП рдЧрдП рд╣реИрдВ, рддреЛ рдкреГрд╖реНрда рд╕рд╛рдордЧреНрд░реА рдХрд╛ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкреНрд░рд╛рд░реВрдк `text` (рд╕реНрдкреЗрд╕-рдЕрд▓рдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╕рдВрдпреЛрдЬрди) рд╣реЛрдЧрд╛ред рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ `text`, `JSON`, `YAML`, `CSV` рд╕рд╣рд┐рдд рдЕрдиреНрдп рдкреНрд░рд╛рд░реВрдк рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

#### рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдкреНрд░рд╛рд░реВрдк рдХреЛ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░реЗрдВ

SpannerLoader рдорд╛рдирддрд╛ рд╣реИ рдХрд┐ `langchain_metadata` рдирд╛рдордХ рдПрдХ рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдХреЙрд▓рдо рд╣реИ рдЬреЛ JSON рдбреЗрдЯрд╛ рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХрд░рддрд╛ рд╣реИред рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдХреЙрд▓рдо рдХреЛ рдЖрдзрд╛рд░ рдбрд┐рдХреНрд╢рдирд░реА рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдЕрдиреНрдп рд╕рднреА рдХреЙрд▓рдо рдбреЗрдЯрд╛ рдЬреЛрдбрд╝ рджрд┐рдП рдЬрд╛рдПрдВрдЧреЗ рдФрд░ рдореВрд▓ рдорд╛рди рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдпреЗ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдХреЛ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ:

```python
custom_metadata_loader = SpannerLoader(
    INSTANCE_ID, DATABASE_ID, query, metadata_columns=["column1", "column2"]
)
```

#### JSON рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдХреЙрд▓рдо рдирд╛рдо рдХреЛ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░реЗрдВ

рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рд▓реЛрдбрд░ `langchain_metadata` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдЖрдзрд╛рд░ рдбрд┐рдХреНрд╢рдирд░реА рдХреЗ рд░реВрдк рдореЗрдВ рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЗрд╕реЗ рдЙрд╕ JSON рдХреЙрд▓рдо рдХреЛ рдЪреБрдирдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ Document рдХреЗ рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП рдЖрдзрд╛рд░ рдбрд┐рдХреНрд╢рдирд░реА рдХреЗ рд░реВрдк рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рд╣реИред

```python
custom_metadata_json_loader = SpannerLoader(
    INSTANCE_ID, DATABASE_ID, query, metadata_json_column="another-json-column"
)
```

### рдХрд╕реНрдЯрдо рд╕реНрдЯреЗрд▓рдиреЗрд╕

рдбрд┐рдлрд╝реЙрд▓реНрдЯ [рд╕реНрдЯреЗрд▓рдиреЗрд╕](https://cloud.google.com/python/docs/reference/spanner/latest/snapshot-usage#beginning-a-snapshot) 15 рд╕реЗрдХрдВрдб рд╣реИред рдЗрд╕реЗ рдПрдХ рдХрдордЬрд╝реЛрд░ рдмрд╛рдЙрдВрдб (рдЬреЛ рдпрд╛ рддреЛ рдХрд┐рд╕реА рджрд┐рдП рдЧрдП рд╕рдордп-рдорд╛рди рдХреЗ рд░реВрдк рдореЗрдВ рд╕рднреА рдкрдарди рдХреЛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣реЛ рд╕рдХрддрд╛ рд╣реИ) рдпрд╛ рдкрд┐рдЫрд▓реЗ рдХреБрдЫ рд╕рдордп рдХреЗ рд░реВрдк рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдХреЗ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

```python
import datetime

timestamp = datetime.datetime.utcnow()
custom_timestamp_loader = SpannerLoader(
    INSTANCE_ID,
    DATABASE_ID,
    query,
    staleness=timestamp,
)
```

```python
duration = 20.0
custom_duration_loader = SpannerLoader(
    INSTANCE_ID,
    DATABASE_ID,
    query,
    staleness=duration,
)
```

### рдбреЗрдЯрд╛ рдмреВрд╕реНрдЯ рдЪрд╛рд▓реВ рдХрд░реЗрдВ

рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рд▓реЛрдбрд░ [рдбреЗрдЯрд╛ рдмреВрд╕реНрдЯ](https://cloud.google.com/spanner/docs/databoost/databoost-overview) рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕рд╕реЗ рдЕрддрд┐рд░рд┐рдХреНрдд рд▓рд╛рдЧрдд рдЬреБрдбрд╝реА рд╣реБрдИ рд╣реИ, рдФрд░ рдЕрддрд┐рд░рд┐рдХреНрдд IAM рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрд╕реЗ рдЪрд╛рд▓реВ рдХрд░рдиреЗ рдХрд╛ рд╡рд┐рдХрд▓реНрдк рдЪреБрди рд╕рдХрддрд╛ рд╣реИред

```python
custom_databoost_loader = SpannerLoader(
    INSTANCE_ID,
    DATABASE_ID,
    query,
    databoost=True,
)
```

### рдХрд╕реНрдЯрдо рдХреНрд▓рд╛рдЗрдВрдЯ

рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдХреНрд▓рд╛рдЗрдВрдЯ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдХреНрд▓рд╛рдЗрдВрдЯ рд╣реИред `credentials` рдФрд░ `project` рдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдкрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░ рдореЗрдВ рдПрдХ рдХрд╕реНрдЯрдо рдХреНрд▓рд╛рдЗрдВрдЯ рдкрд╛рд╕ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

```python
from google.cloud import spanner

custom_client = spanner.Client(project="my-project", credentials=creds)
saver = SpannerDocumentSaver(
    INSTANCE_ID,
    DATABASE_ID,
    TABLE_NAME,
    client=custom_client,
)
```

### SpannerDocumentSaver рдХреЗ рд▓рд┐рдП рдХрд╕реНрдЯрдо рдкреНрд░рд╛рд░рдВрднреАрдХрд░рдг

SpannerDocumentSaver рдХрд╕реНрдЯрдо рдкреНрд░рд╛рд░рдВрднреАрдХрд░рдг рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред рдпрд╣ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдпрд╣ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ рдХрд┐ рдбреЙрдХреНрдпреВрдореЗрдВрдЯ рдХреЛ рдЯреЗрдмрд▓ рдореЗрдВ рдХреИрд╕реЗ рд╕рд╣реЗрдЬрд╛ рдЬрд╛рдПред

content_column: рдпрд╣ рдбреЙрдХреНрдпреВрдореЗрдВрдЯ рдХреЗ рдкреГрд╖реНрда рд╕рд╛рдордЧреНрд░реА рдХреЗ рд▓рд┐рдП рдХреЙрд▓рдо рдирд╛рдо рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ `page_content` рд╣реИред

metadata_columns: рдпрджрд┐ рдбреЙрдХреНрдпреВрдореЗрдВрдЯ рдХреЗ рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдореЗрдВ рдХреБрдВрдЬреА рдореМрдЬреВрдж рд╣реИ, рддреЛ рдпрд╣ рдореЗрдЯрд╛рдбреЗрдЯрд╛ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХреЙрд▓рдо рдореЗрдВ рд╕рд╣реЗрдЬрд╛ рдЬрд╛рдПрдЧрд╛ред

metadata_json_column: рдпрд╣ рд╡рд┐рд╢реЗрд╖ JSON рдХреЙрд▓рдо рдХреЗ рд▓рд┐рдП рдХреЙрд▓рдо рдирд╛рдо рд╣реЛрдЧрд╛ред рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ `langchain_metadata` рд╣реИред

```python
custom_saver = SpannerDocumentSaver(
    INSTANCE_ID,
    DATABASE_ID,
    TABLE_NAME,
    content_column="my-content",
    metadata_columns=["foo"],
    metadata_json_column="my-special-json-column",
)
```

### Spanner рдХреЗ рд▓рд┐рдП рдХрд╕реНрдЯрдо рд╕реНрдХреАрдорд╛ рдкреНрд░рд╛рд░рдВрдн рдХрд░реЗрдВ

SpannerDocumentSaver рдореЗрдВ `init_document_table` рдореЗрдердб рд╣реЛрдЧрд╛ рдЬреЛ рдХрд╕реНрдЯрдо рд╕реНрдХреАрдорд╛ рдХреЗ рд╕рд╛рде рдирдИ рддрд╛рд▓рд┐рдХрд╛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╣реЛрдЧрд╛ред

```python
from langchain_google_spanner import Column

new_table_name = "my_new_table"

SpannerDocumentSaver.init_document_table(
    INSTANCE_ID,
    DATABASE_ID,
    new_table_name,
    content_column="my-page-content",
    metadata_columns=[
        Column("category", "STRING(36)", True),
        Column("price", "FLOAT64", False),
    ],
)
```
