---
translated: true
---

# Tampon de conversation

Ce cahier montre comment utiliser `ConversationBufferMemory`. Cette mémoire permet de stocker des messages et d'extraire ensuite les messages dans une variable.

Nous pouvons d'abord l'extraire sous forme de chaîne de caractères.

```python
<!--IMPORTS:[{"imported": "ConversationBufferMemory", "source": "langchain.memory", "docs": "https://api.python.langchain.com/en/latest/memory/langchain.memory.buffer.ConversationBufferMemory.html", "title": "Conversation Buffer"}]-->
from langchain.memory import ConversationBufferMemory
```

```python
memory = ConversationBufferMemory()
memory.save_context({"input": "hi"}, {"output": "whats up"})
```

```python
memory.load_memory_variables({})
```

```output
    {'history': 'Human: hi\nAI: whats up'}
```

Nous pouvons également obtenir l'historique sous forme de liste de messages (cela est utile si vous l'utilisez avec un modèle de chat).

```python
memory = ConversationBufferMemory(return_messages=True)
memory.save_context({"input": "hi"}, {"output": "whats up"})
```

```python
memory.load_memory_variables({})
```

```output
    {'history': [HumanMessage(content='hi', additional_kwargs={}),
      AIMessage(content='whats up', additional_kwargs={})]}
```

## Utilisation dans une chaîne

Enfin, examinons l'utilisation de ceci dans une chaîne (en définissant `verbose=True` afin que nous puissions voir l'invite).

```python
<!--IMPORTS:[{"imported": "OpenAI", "source": "langchain_openai", "docs": "https://api.python.langchain.com/en/latest/llms/langchain_openai.llms.base.OpenAI.html", "title": "Conversation Buffer"}, {"imported": "ConversationChain", "source": "langchain.chains", "docs": "https://api.python.langchain.com/en/latest/chains/langchain.chains.conversation.base.ConversationChain.html", "title": "Conversation Buffer"}]-->
from langchain_openai import OpenAI
from langchain.chains import ConversationChain


llm = OpenAI(temperature=0)
conversation = ConversationChain(
    llm=llm,
    verbose=True,
    memory=ConversationBufferMemory()
)
```

```python
conversation.predict(input="Hi there!")
```

```output


    > Entering new ConversationChain chain...
    Prompt after formatting:
    The following is a friendly conversation between a human and an AI. The AI is talkative and provides lots of specific details from its context. If the AI does not know the answer to a question, it truthfully says it does not know.

    Current conversation:

    Human: Hi there!
    AI:

    > Finished chain.





    " Hi there! It's nice to meet you. How can I help you today?"
```

```python
conversation.predict(input="I'm doing well! Just having a conversation with an AI.")
```

```output


    > Entering new ConversationChain chain...
    Prompt after formatting:
    The following is a friendly conversation between a human and an AI. The AI is talkative and provides lots of specific details from its context. If the AI does not know the answer to a question, it truthfully says it does not know.

    Current conversation:
    Human: Hi there!
    AI:  Hi there! It's nice to meet you. How can I help you today?
    Human: I'm doing well! Just having a conversation with an AI.
    AI:

    > Finished chain.





    " That's great! It's always nice to have a conversation with someone new. What would you like to talk about?"
```

```python
conversation.predict(input="Tell me about yourself.")
```

```output


    > Entering new ConversationChain chain...
    Prompt after formatting:
    The following is a friendly conversation between a human and an AI. The AI is talkative and provides lots of specific details from its context. If the AI does not know the answer to a question, it truthfully says it does not know.

    Current conversation:
    Human: Hi there!
    AI:  Hi there! It's nice to meet you. How can I help you today?
    Human: I'm doing well! Just having a conversation with an AI.
    AI:  That's great! It's always nice to have a conversation with someone new. What would you like to talk about?
    Human: Tell me about yourself.
    AI:

    > Finished chain.





    " Sure! I'm an AI created to help people with their everyday tasks. I'm programmed to understand natural language and provide helpful information. I'm also constantly learning and updating my knowledge base so I can provide more accurate and helpful answers."
```
